<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Linux 的账户与群组 | Linux 系统教程（笔记）</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/linux-tutorial/favicon.ico">
    <link rel="manifest" href="/linux-tutorial/manifest.json">
    <meta name="description" content="linux 系统教程学习笔记">
    <link rel="preload" href="/linux-tutorial/assets/css/0.styles.7e75da3d.css" as="style"><link rel="preload" href="/linux-tutorial/assets/js/app.3ea62065.js" as="script"><link rel="preload" href="/linux-tutorial/assets/js/2.b00e63ff.js" as="script"><link rel="preload" href="/linux-tutorial/assets/js/23.578aedc7.js" as="script"><link rel="preload" href="/linux-tutorial/assets/js/16.b0a90d5f.js" as="script"><link rel="prefetch" href="/linux-tutorial/assets/js/10.2f6e83c2.js"><link rel="prefetch" href="/linux-tutorial/assets/js/100.b3722352.js"><link rel="prefetch" href="/linux-tutorial/assets/js/101.8c1ef482.js"><link rel="prefetch" href="/linux-tutorial/assets/js/102.2586eda7.js"><link rel="prefetch" href="/linux-tutorial/assets/js/103.e4ead933.js"><link rel="prefetch" href="/linux-tutorial/assets/js/104.85e3fd0d.js"><link rel="prefetch" href="/linux-tutorial/assets/js/105.cc2c5c94.js"><link rel="prefetch" href="/linux-tutorial/assets/js/106.927267ce.js"><link rel="prefetch" href="/linux-tutorial/assets/js/107.1dd2a942.js"><link rel="prefetch" href="/linux-tutorial/assets/js/108.6090320a.js"><link rel="prefetch" href="/linux-tutorial/assets/js/109.57884f50.js"><link rel="prefetch" href="/linux-tutorial/assets/js/11.48476434.js"><link rel="prefetch" href="/linux-tutorial/assets/js/110.33c6958e.js"><link rel="prefetch" href="/linux-tutorial/assets/js/111.fd8a0020.js"><link rel="prefetch" href="/linux-tutorial/assets/js/112.788498e1.js"><link rel="prefetch" href="/linux-tutorial/assets/js/113.8de94cf4.js"><link rel="prefetch" href="/linux-tutorial/assets/js/114.2f9a6bc8.js"><link rel="prefetch" href="/linux-tutorial/assets/js/115.26cb32f2.js"><link rel="prefetch" href="/linux-tutorial/assets/js/116.c7a39b2c.js"><link rel="prefetch" href="/linux-tutorial/assets/js/117.3a5a37f1.js"><link rel="prefetch" href="/linux-tutorial/assets/js/118.16961e8a.js"><link rel="prefetch" href="/linux-tutorial/assets/js/119.9512ae4e.js"><link rel="prefetch" href="/linux-tutorial/assets/js/12.d5e57772.js"><link rel="prefetch" href="/linux-tutorial/assets/js/120.23d99fc1.js"><link rel="prefetch" href="/linux-tutorial/assets/js/121.e3a9422b.js"><link rel="prefetch" href="/linux-tutorial/assets/js/122.fdbe08a8.js"><link rel="prefetch" href="/linux-tutorial/assets/js/123.5b64c6d2.js"><link rel="prefetch" href="/linux-tutorial/assets/js/124.35e2afbb.js"><link rel="prefetch" href="/linux-tutorial/assets/js/125.5c0c3620.js"><link rel="prefetch" href="/linux-tutorial/assets/js/126.c9ad2adc.js"><link rel="prefetch" href="/linux-tutorial/assets/js/127.2a7e4d5a.js"><link rel="prefetch" href="/linux-tutorial/assets/js/128.b260f3a3.js"><link rel="prefetch" href="/linux-tutorial/assets/js/129.17deb712.js"><link rel="prefetch" href="/linux-tutorial/assets/js/13.baaaf940.js"><link rel="prefetch" href="/linux-tutorial/assets/js/130.2c20de59.js"><link rel="prefetch" href="/linux-tutorial/assets/js/131.60b7d099.js"><link rel="prefetch" href="/linux-tutorial/assets/js/132.d9ef53df.js"><link rel="prefetch" href="/linux-tutorial/assets/js/133.edffc570.js"><link rel="prefetch" href="/linux-tutorial/assets/js/134.f15edd55.js"><link rel="prefetch" href="/linux-tutorial/assets/js/135.f64a41b5.js"><link rel="prefetch" href="/linux-tutorial/assets/js/136.29678524.js"><link rel="prefetch" href="/linux-tutorial/assets/js/137.9c43f91c.js"><link rel="prefetch" href="/linux-tutorial/assets/js/138.ffadb27b.js"><link rel="prefetch" href="/linux-tutorial/assets/js/139.2b708550.js"><link rel="prefetch" href="/linux-tutorial/assets/js/14.4342bdf7.js"><link rel="prefetch" href="/linux-tutorial/assets/js/140.862a81a9.js"><link rel="prefetch" href="/linux-tutorial/assets/js/141.b7c0871f.js"><link rel="prefetch" href="/linux-tutorial/assets/js/142.de57a7d2.js"><link rel="prefetch" href="/linux-tutorial/assets/js/143.d1286be6.js"><link rel="prefetch" href="/linux-tutorial/assets/js/144.78dea036.js"><link rel="prefetch" href="/linux-tutorial/assets/js/145.cd89bb50.js"><link rel="prefetch" href="/linux-tutorial/assets/js/146.c00ea063.js"><link rel="prefetch" href="/linux-tutorial/assets/js/147.6cf25c98.js"><link rel="prefetch" href="/linux-tutorial/assets/js/148.1041f769.js"><link rel="prefetch" href="/linux-tutorial/assets/js/149.b5566432.js"><link rel="prefetch" href="/linux-tutorial/assets/js/15.8796218f.js"><link rel="prefetch" href="/linux-tutorial/assets/js/150.e5c75119.js"><link rel="prefetch" href="/linux-tutorial/assets/js/151.5c388a5f.js"><link rel="prefetch" href="/linux-tutorial/assets/js/152.ee6213e5.js"><link rel="prefetch" href="/linux-tutorial/assets/js/153.1b602d8e.js"><link rel="prefetch" href="/linux-tutorial/assets/js/154.4ea59cb4.js"><link rel="prefetch" href="/linux-tutorial/assets/js/155.24b59ac3.js"><link rel="prefetch" href="/linux-tutorial/assets/js/156.9b15d371.js"><link rel="prefetch" href="/linux-tutorial/assets/js/157.8d1f9503.js"><link rel="prefetch" href="/linux-tutorial/assets/js/158.ccaead85.js"><link rel="prefetch" href="/linux-tutorial/assets/js/159.5b49ce1b.js"><link rel="prefetch" href="/linux-tutorial/assets/js/160.95a4fb36.js"><link rel="prefetch" href="/linux-tutorial/assets/js/161.cde930c9.js"><link rel="prefetch" href="/linux-tutorial/assets/js/162.7a754448.js"><link rel="prefetch" href="/linux-tutorial/assets/js/163.d55c6349.js"><link rel="prefetch" href="/linux-tutorial/assets/js/164.9ee339c2.js"><link rel="prefetch" href="/linux-tutorial/assets/js/165.30141050.js"><link rel="prefetch" href="/linux-tutorial/assets/js/166.464d423d.js"><link rel="prefetch" href="/linux-tutorial/assets/js/167.660c924d.js"><link rel="prefetch" href="/linux-tutorial/assets/js/168.2cae5c9c.js"><link rel="prefetch" href="/linux-tutorial/assets/js/169.1e24d7be.js"><link rel="prefetch" href="/linux-tutorial/assets/js/17.04ccb392.js"><link rel="prefetch" href="/linux-tutorial/assets/js/170.8572828e.js"><link rel="prefetch" href="/linux-tutorial/assets/js/171.cf33f986.js"><link rel="prefetch" href="/linux-tutorial/assets/js/172.36741bc1.js"><link rel="prefetch" href="/linux-tutorial/assets/js/173.65edcd81.js"><link rel="prefetch" href="/linux-tutorial/assets/js/174.08dd2802.js"><link rel="prefetch" href="/linux-tutorial/assets/js/175.0173e57f.js"><link rel="prefetch" href="/linux-tutorial/assets/js/176.b64d6d09.js"><link rel="prefetch" href="/linux-tutorial/assets/js/177.dcf9ae18.js"><link rel="prefetch" href="/linux-tutorial/assets/js/178.ae42ddc1.js"><link rel="prefetch" href="/linux-tutorial/assets/js/18.4e56fcb3.js"><link rel="prefetch" href="/linux-tutorial/assets/js/19.f21c7977.js"><link rel="prefetch" href="/linux-tutorial/assets/js/20.4c69b8ff.js"><link rel="prefetch" href="/linux-tutorial/assets/js/21.3aec2873.js"><link rel="prefetch" href="/linux-tutorial/assets/js/22.861e719b.js"><link rel="prefetch" href="/linux-tutorial/assets/js/24.57eb980d.js"><link rel="prefetch" href="/linux-tutorial/assets/js/25.cade1e03.js"><link rel="prefetch" href="/linux-tutorial/assets/js/26.d4c42c11.js"><link rel="prefetch" href="/linux-tutorial/assets/js/27.e67320de.js"><link rel="prefetch" href="/linux-tutorial/assets/js/28.5d42931b.js"><link rel="prefetch" href="/linux-tutorial/assets/js/29.78c32762.js"><link rel="prefetch" href="/linux-tutorial/assets/js/3.1986f040.js"><link rel="prefetch" href="/linux-tutorial/assets/js/30.4495d9ce.js"><link rel="prefetch" href="/linux-tutorial/assets/js/31.95d35ed3.js"><link rel="prefetch" href="/linux-tutorial/assets/js/32.dc04efd9.js"><link rel="prefetch" href="/linux-tutorial/assets/js/33.5f1f572a.js"><link rel="prefetch" href="/linux-tutorial/assets/js/34.93972f88.js"><link rel="prefetch" href="/linux-tutorial/assets/js/35.bc6d3388.js"><link rel="prefetch" href="/linux-tutorial/assets/js/36.209d75c8.js"><link rel="prefetch" href="/linux-tutorial/assets/js/37.d30c94d3.js"><link rel="prefetch" href="/linux-tutorial/assets/js/38.02682c6d.js"><link rel="prefetch" href="/linux-tutorial/assets/js/39.7d6ee8db.js"><link rel="prefetch" href="/linux-tutorial/assets/js/4.896de413.js"><link rel="prefetch" href="/linux-tutorial/assets/js/40.7925dcab.js"><link rel="prefetch" href="/linux-tutorial/assets/js/41.58fb9c6a.js"><link rel="prefetch" href="/linux-tutorial/assets/js/42.2a87c226.js"><link rel="prefetch" href="/linux-tutorial/assets/js/43.d181a9c7.js"><link rel="prefetch" href="/linux-tutorial/assets/js/44.0476bb9a.js"><link rel="prefetch" href="/linux-tutorial/assets/js/45.52a56f6c.js"><link rel="prefetch" href="/linux-tutorial/assets/js/46.8bbaa61c.js"><link rel="prefetch" href="/linux-tutorial/assets/js/47.a8d3f059.js"><link rel="prefetch" href="/linux-tutorial/assets/js/48.a36fbedb.js"><link rel="prefetch" href="/linux-tutorial/assets/js/49.1799d727.js"><link rel="prefetch" href="/linux-tutorial/assets/js/5.1e8af3f8.js"><link rel="prefetch" href="/linux-tutorial/assets/js/50.f12984d3.js"><link rel="prefetch" href="/linux-tutorial/assets/js/51.d4ddd236.js"><link rel="prefetch" href="/linux-tutorial/assets/js/52.87a15496.js"><link rel="prefetch" href="/linux-tutorial/assets/js/53.701965d2.js"><link rel="prefetch" href="/linux-tutorial/assets/js/54.cc68ce47.js"><link rel="prefetch" href="/linux-tutorial/assets/js/55.653237e5.js"><link rel="prefetch" href="/linux-tutorial/assets/js/56.1baa6aea.js"><link rel="prefetch" href="/linux-tutorial/assets/js/57.09785e4b.js"><link rel="prefetch" href="/linux-tutorial/assets/js/58.64f3994d.js"><link rel="prefetch" href="/linux-tutorial/assets/js/59.9df45c80.js"><link rel="prefetch" href="/linux-tutorial/assets/js/6.7e1ac443.js"><link rel="prefetch" href="/linux-tutorial/assets/js/60.f2ffc564.js"><link rel="prefetch" href="/linux-tutorial/assets/js/61.b4b7dde2.js"><link rel="prefetch" href="/linux-tutorial/assets/js/62.74ecad97.js"><link rel="prefetch" href="/linux-tutorial/assets/js/63.86c2c4b7.js"><link rel="prefetch" href="/linux-tutorial/assets/js/64.a8104d1e.js"><link rel="prefetch" href="/linux-tutorial/assets/js/65.f0e9a242.js"><link rel="prefetch" href="/linux-tutorial/assets/js/66.3e058e54.js"><link rel="prefetch" href="/linux-tutorial/assets/js/67.f35fdc92.js"><link rel="prefetch" href="/linux-tutorial/assets/js/68.49d0163a.js"><link rel="prefetch" href="/linux-tutorial/assets/js/69.9d26e579.js"><link rel="prefetch" href="/linux-tutorial/assets/js/7.44a8110c.js"><link rel="prefetch" href="/linux-tutorial/assets/js/70.595c942e.js"><link rel="prefetch" href="/linux-tutorial/assets/js/71.c08f3394.js"><link rel="prefetch" href="/linux-tutorial/assets/js/72.c0e7fd28.js"><link rel="prefetch" href="/linux-tutorial/assets/js/73.059936b7.js"><link rel="prefetch" href="/linux-tutorial/assets/js/74.c5bd8446.js"><link rel="prefetch" href="/linux-tutorial/assets/js/75.43cb35df.js"><link rel="prefetch" href="/linux-tutorial/assets/js/76.81eff8a5.js"><link rel="prefetch" href="/linux-tutorial/assets/js/77.13799166.js"><link rel="prefetch" href="/linux-tutorial/assets/js/78.bfd8b227.js"><link rel="prefetch" href="/linux-tutorial/assets/js/79.c643ae63.js"><link rel="prefetch" href="/linux-tutorial/assets/js/8.d908ccdf.js"><link rel="prefetch" href="/linux-tutorial/assets/js/80.6774c39d.js"><link rel="prefetch" href="/linux-tutorial/assets/js/81.1e0cf9b0.js"><link rel="prefetch" href="/linux-tutorial/assets/js/82.07ec7389.js"><link rel="prefetch" href="/linux-tutorial/assets/js/83.c5bf5183.js"><link rel="prefetch" href="/linux-tutorial/assets/js/84.41a9c9da.js"><link rel="prefetch" href="/linux-tutorial/assets/js/85.417359ad.js"><link rel="prefetch" href="/linux-tutorial/assets/js/86.4fab0b07.js"><link rel="prefetch" href="/linux-tutorial/assets/js/87.e89d0800.js"><link rel="prefetch" href="/linux-tutorial/assets/js/88.da8e748b.js"><link rel="prefetch" href="/linux-tutorial/assets/js/89.dc1f03ca.js"><link rel="prefetch" href="/linux-tutorial/assets/js/9.fe184c91.js"><link rel="prefetch" href="/linux-tutorial/assets/js/90.d9814c8e.js"><link rel="prefetch" href="/linux-tutorial/assets/js/91.d2b0823a.js"><link rel="prefetch" href="/linux-tutorial/assets/js/92.407929d3.js"><link rel="prefetch" href="/linux-tutorial/assets/js/93.7b975c37.js"><link rel="prefetch" href="/linux-tutorial/assets/js/94.e6aa7f65.js"><link rel="prefetch" href="/linux-tutorial/assets/js/95.0d268a19.js"><link rel="prefetch" href="/linux-tutorial/assets/js/96.d3ebc4e5.js"><link rel="prefetch" href="/linux-tutorial/assets/js/97.4cc827d1.js"><link rel="prefetch" href="/linux-tutorial/assets/js/98.87d8de27.js"><link rel="prefetch" href="/linux-tutorial/assets/js/99.a360003c.js">
    <link rel="stylesheet" href="/linux-tutorial/assets/css/0.styles.7e75da3d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/linux-tutorial/" class="home-link router-link-active"><img src="/linux-tutorial/mlogo.svg" alt="Linux 系统教程（笔记）" class="logo"> <span class="site-name can-hide">Linux 系统教程（笔记）</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/linux-tutorial/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/linux-tutorial/tutorial-basis/" class="nav-link router-link-active">
  鸟哥私房菜-基础篇
</a></div><div class="nav-item"><a href="/linux-tutorial/discuss.html" class="nav-link">
  参与讨论
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记精选汇总" class="dropdown-title"><span class="title">笔记精选汇总</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/zq99299/repository-summary" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub 站
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://book.mrcode.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  国内镜像站
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/zq99299/linux-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/linux-tutorial/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/linux-tutorial/tutorial-basis/" class="nav-link router-link-active">
  鸟哥私房菜-基础篇
</a></div><div class="nav-item"><a href="/linux-tutorial/discuss.html" class="nav-link">
  参与讨论
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记精选汇总" class="dropdown-title"><span class="title">笔记精选汇总</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/zq99299/repository-summary" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub 站
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://book.mrcode.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  国内镜像站
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/zq99299/linux-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/linux-tutorial/tutorial-basis/" class="sidebar-link">Linux 基础篇（鸟哥私房菜）- 第四版</a></li><li><a href="/linux-tutorial/tutorial-basis/00/" class="sidebar-link">00. 计算机概论</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>01. Linux 是什么/如何学习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>02. 主机规划与磁盘分区</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>03. 安装 CentOS 7.x</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>04. 首次登陆与线上求助</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>05. Linux 的文件权限与目录配置</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>06. Linux 文件与目录管理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>07. Linux 磁盘与文件系统管理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>08. 文件与文件系统的压缩、打包与备份</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>09. vim 程序编辑器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>10. 认识与学习 BASH</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>11. 正则表达式与文件格式化处理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>12. 学习 Shell Scripts</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>13. Linux 账号管理与 ACL 权限设置</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/linux-tutorial/tutorial-basis/13/" class="sidebar-link">Linux 账号管理与 ACL 权限设置</a></li><li><a href="/linux-tutorial/tutorial-basis/13/01.html" class="active sidebar-link">Linux 的账户与群组</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/linux-tutorial/tutorial-basis/13/01.html#使用者标识符：uid-与-gid" class="sidebar-link">使用者标识符：UID 与 GID</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/tutorial-basis/13/01.html#使用者账户" class="sidebar-link">使用者账户</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/linux-tutorial/tutorial-basis/13/01.html#etc-passwd-文件结构" class="sidebar-link">/etc/passwd 文件结构</a></li></ul></li><li class="sidebar-sub-header"><a href="/linux-tutorial/tutorial-basis/13/01.html#etc-shadow-文件结构" class="sidebar-link">/etc/shadow 文件结构</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/tutorial-basis/13/01.html#关于群组：有效与初始群组、groups、newgrp" class="sidebar-link">关于群组：有效与初始群组、groups、newgrp</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/linux-tutorial/tutorial-basis/13/01.html#etc-group-文件结构" class="sidebar-link">/etc/group 文件结构</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/tutorial-basis/13/01.html#有效群组（effective-group）与初始群组（inital-group）" class="sidebar-link">有效群组（effective group）与初始群组（inital group）</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/tutorial-basis/13/01.html#groups：有效与支持群组的观察" class="sidebar-link">groups：有效与支持群组的观察</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/tutorial-basis/13/01.html#newgrp：有效群组的切换" class="sidebar-link">newgrp：有效群组的切换</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/tutorial-basis/13/01.html#etc-gshadow" class="sidebar-link">/etc/gshadow</a></li></ul></li></ul></li><li><a href="/linux-tutorial/tutorial-basis/13/02.html" class="sidebar-link">账号管理</a></li><li><a href="/linux-tutorial/tutorial-basis/13/03.html" class="sidebar-link">主机的细部权限规划：ACL 的使用</a></li><li><a href="/linux-tutorial/tutorial-basis/13/04.html" class="sidebar-link">使用者身份切换</a></li><li><a href="/linux-tutorial/tutorial-basis/13/05.html" class="sidebar-link">用户的特殊 shell 与 PAM 模块</a></li><li><a href="/linux-tutorial/tutorial-basis/13/06.html" class="sidebar-link">Linux 主机上的用户信息传递</a></li><li><a href="/linux-tutorial/tutorial-basis/13/07.html" class="sidebar-link">CentOS 7 环境下大量建立账户的方法</a></li><li><a href="/linux-tutorial/tutorial-basis/13/08.html" class="sidebar-link">重点回顾</a></li><li><a href="/linux-tutorial/tutorial-basis/13/09.html" class="sidebar-link">本章练习</a></li><li><a href="/linux-tutorial/tutorial-basis/13/10.html" class="sidebar-link">参考数据与延伸阅读</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>14. 磁盘配额（Quota）与进阶文件系统管理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>15. 例行性工作排程（crontab）</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>16. 进程管理与 SELinux 初探</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>17. 认识系统服务（daemons）</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>18. 认识与分析登录文件</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>19. 开机流程、模块管理与 Loader</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>20. 基础系统设置与备份策略</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>21. 软件安装：原始码与 Tarball</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>22. 软件安装 RPM、SRPM、YUM</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="linux-的账户与群组"><a href="#linux-的账户与群组" class="header-anchor">#</a> Linux 的账户与群组</h1> <p>账户管理是管理员工作中相当重要的一环，并且所有一般用户的账户申请，都必须需要管理员的协助才可以，所以必须了解下如何管理好一个服务器主机账户。</p> <p>在管理 Linux 主机的账户时，我们必须先来了解下 Linux 到底是如何辨别每一个使用者的</p> <h2 id="使用者标识符：uid-与-gid"><a href="#使用者标识符：uid-与-gid" class="header-anchor">#</a> 使用者标识符：UID 与 GID</h2> <p>登录使用的账户，但是账户与 ID 对应在 /etc/passwd 中，Linux 主机针对 ID 进行识别</p> <p>比如下载过 tarball 类型的文件，解压之后的文件中，文件拥有者的字段可能显示「不明的数字」，这说明在很多场景下几乎上都是用 ID 来识别的</p> <p>在第 5 章中提到过，每一个文件都具有「拥有人与拥有群组」的属性，所以每个使用者至少会取得两个 ID:</p> <ul><li>UID：user id</li> <li>GID：group id</li></ul> <p>文件也是通过 UID 与 GID 来判别他的拥有者与群组的，当有要显示文件属性的需求时，系统会依据 <code>/etc/passwd</code> 与 <code>/etc/group</code> 的内容，找到 UID/GID 对应的账户与组名再显示出来。</p> <p>可以通过一个小测试来验证，使用 root 身份 <code>vim /etc/passwd</code> 然后将一般身份的使用者 ID 随便更改一个号码，然后再到这个一般身份的目录下查看该账户拥有的文件，就会发现该文件的拥有人变成了「数字」</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 确定有 mrcode 账户</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># id mrcode</span>
<span class="token assign-left variable">uid</span><span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">(</span>mrcode<span class="token punctuation">)</span> <span class="token assign-left variable">gid</span><span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">(</span>mrcode<span class="token punctuation">)</span> <span class="token assign-left variable">groups</span><span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">(</span>mrcode<span class="token punctuation">)</span>

<span class="token comment"># 查看该文件的拥有者，显示是 mrcode</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># ll -d /home/mrcode/</span>
drwx------. <span class="token number">16</span> mrcode mrcode <span class="token number">4096</span> Feb <span class="token number">18</span> <span class="token number">13</span>:34 /home/mrcode/

<span class="token comment"># 修改 mrcode 的 UID 1000 变成 2000</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/passwd</span>
mrcode:x:2000:1000:mrcode:/home/mrcode:/bin/bash

<span class="token comment"># 再次查看文件的拥有者，从原先的 mrcode 变成了 1000.变成了数字</span>
<span class="token comment"># 最后记得还原回来</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># ll -d /home/mrcode/</span>
drwx------. <span class="token number">16</span> <span class="token number">1000</span> mrcode <span class="token number">4096</span> Feb <span class="token number">18</span> <span class="token number">13</span>:34 /home/mrcode/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>上面的例子仅说明 UID 与账户的对应性，在 LInux 下，不要随意锈钢系统上某些账户的 UID，否则可能导致某些程序无法进行。</p> <p>如果上述操作，不修改回去的话，那么下次 mrcode 登录时就无法进入自己的家的目录，因为他的 UID 已经锈钢为 2000 了，但是他家目录（/home/mrcode） 却记录的是 1000，由于权限是 700，因此他讲无法进入元宝的家的目录</p> <h2 id="使用者账户"><a href="#使用者账户" class="header-anchor">#</a> 使用者账户</h2> <p>Linux 的用户需要通过 tty1~tty6 的终端机提供的 login 接口，并输入账户与密码后才能够登录。如果是通过网络的话，至少需要学习使用 ssh 功能（服务器篇讲解）。那么输入账户密码后，系统处理了如下东西：</p> <ol><li>先找 <code>/etc/passwd</code>中是否有你输入的账户？如果有则将账户对应的 UID 与 GID（在/etc/group）读出来，该账户的家目录与 shell 设置也读出来。如果没有则跳出</li> <li>再核对密码表，在 <code>/etc/shadow</code>找出对应的账户与 UID，进行比对</li> <li>如果一切都正确，就进入 Shell 的管控阶段</li></ol> <p>大致流程如上，当登录时，<code>/etc/passwd</code>与<code>/etc/shadow</code>会被用到（很多攻击者会将特殊账户写在  <code>/etc/passwd</code> 中），所以如果要备份 Linux 系统账户，则这两个文件一定要备份</p> <p>与使用者相关的两个非常重要的文件</p> <ul><li><code>/etc/passwd</code>：管理 UID/GID 重要参数相关</li> <li><code>/etc/shadow</code>：管理密码相关</li></ul> <p>那么下面来简单介绍这两个文件，通过 <code>man 5 passwd</code>  和 <code>man 5 shadow</code> 了解详情</p> <h3 id="etc-passwd-文件结构"><a href="#etc-passwd-文件结构" class="header-anchor">#</a> <code>/etc/passwd</code> 文件结构</h3> <p>每一行表示一个账户，其中有些特殊的账户是系统正常运行所必须的，可以简称他为系统账户，例如 bin、daemon、adm、nobody 等，这些账户请不要随意的修改，那么账户内容如下所示</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment">#head -n 4 /etc/passwd</span>
root:x:0:0:root:/root:/bin/bash		<span class="token comment"># 第一行是 root 账户</span>
bin:x:1:1:bin:/bin:/sbin/nologin
daemon:x:2:2:daemon:/sbin:/sbin/nologin
adm:x:3:4:adm:/var/adm:/sbin/nologin

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>每个 Linux 系统都会有第一行，root 管理员这行，每行使用「:」分割为 7 个字段，分别是：</p> <ol><li><p>账户名称：用来对应 UID</p></li> <li><p>密码</p> <p>早期 Unix 系统密码放在该字段上的，该文件特性是所有程序都能够读取，为了安全，则放到 <code>/etc/shadow</code> 中了，该字段使用 x 来占位，表示不使用了</p></li> <li><p>UID</p> <p>使用者标识，通常 UID 有如下几个限制需要了解下：</p> <ul><li><p>id=0 系统管理员：所以当你要让其他的账户名称也具有 root 权限时，将该账户的 UID 修改为 0 即可。不过不建议这样做，容易让系统管理员混乱</p></li> <li><p>id=1~999 系统账户：</p> <p>系统保留使用的 ID，除了 0 之外，其他的 UID 权限与特性并没有不一样，默认 1000 以下作为系统保留账户只是一个习惯；</p> <p>比如系统上启动的网络服务或背景服务希望使用较小的权限去运作，因此就需要这些小权限账户去执行。通常这些账户是不可登陆的，所以在第十章中提到的 <code>/sbin/nologin</code> 这个特殊的 shell 的存在</p> <p>根据系统账户的由来，通常这类账户又大概区分为两种：</p> <ul><li>1~200：由 distributions 自行建立的系统账户</li> <li>201~999：若用户有系统账户需求时，可以使用的账户 UID</li> <li>id=1000~60000：给一般使用者用的。在 linux 核心 3.10.x 版本，已经可以支撑到 4294967295（2的32次方-1）这么大的 UID 了</li></ul></li></ul></li> <li><p>GID：与 <code>/etc/group</code> 有关，该文件与 <code>/etc/passwd</code>类似，只是它是用来规范组名与 GID 的对应</p></li> <li><p>用户信息说明</p> <p>没有什么重要用途，用来描述该账户的意义。但是使用 finger 功能时，该字段可以提供很多的信息，本章后面 chfn 指令会讲解</p></li> <li><p>家的目录</p> <p>以 root 为例，root 的家目录在 /root，所以当 root 登录后，就默认在 /root 目录下。</p> <p>如果你有个账户的使用空间特别的大，想要将该账户家的目录移动到其他硬盘去，就可以在该字段修改，默认的用户家目录在 /home/yourIdName</p></li> <li><p>Shell</p> <p>在前面第十章 BASH 提到过很多次，当用户登录系统后，会取得一个 Shell 来与系统核心进行交互。该字段就是预设 shell 环境，如果想要用 shell 代替让账户无法取得 shell 环境的登录，那么就可以修改为 <code>/sbin/nologin</code>，也可以用来制作纯 pop 邮件账户者的数据</p></li></ol> <h2 id="etc-shadow-文件结构"><a href="#etc-shadow-文件结构" class="header-anchor">#</a> <code>/etc/shadow</code> 文件结构</h2> <p>很多程序运行都与权限有关系，权限与 UID/GID 有关，因此需要读取 <code>/etc/passwd</code> 来获取不同账户的权限。因此 <code>/etc/passwd</code>  的权限为 <code>-rw-r--r--</code>，谁都可以读取该文件，早期密码放到第个字段上，虽然也加密过，但是不安全，因为加密的密码可以通过暴力破解方式取得原始密码</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># head -n 4 /etc/shadow</span>
root:<span class="token variable">$6</span><span class="token variable">$eC75oi</span>.rU.wJPhgN<span class="token variable">$C</span>.C.qFXTvmJ64qFnez88TdcsHuuQAqtAYrukgBYBspgSZbCgzvJuv4OVJ9gaEfA2/.T7e68AZW7RoZt6ubeHD0::0:99999:7:::
bin:*:17834:0:99999:7:::
daemon:*:17834:0:99999:7:::
adm:*:17834:0:99999:7:::

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>每一行一个密码，已「:」分割为 9 个字段</p> <ol><li><p>账户名称，用来与 /etc/passwd 中账户名称对应</p></li> <li><p>密码：经过加密的密码</p> <p>虽然加密过，但是也有可能被破解出来，该文件的预设权限为 <code>-rw------ 或 ------</code>，因此该文件只有 root 才可以读写</p> <p>另外加密方式不同，字符串长度也不同，由于固定加密方式产生的密码长度必须一致，因此该字段长度改变后，该密码就失效了，所以有一些软件通过在该字段前加上 <code>! 或 *</code> 来达到让密码暂时失效的目的</p></li> <li><p>最近修改密码的日期：记录了修改密码的那一天的日期</p> <p>比如 17834 ，这个是以  1970-01-01 作为第一天而累加出来的日期，1970-01-01 + 17834 天 得到的一个时间，想要了解该日期可以使用后续讲解的 chage 指令，想要知道某个日期累计了多少天，可以使用下面的公式来计算</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 2015/05/04 为计算的日期</span>
<span class="token comment"># 86400 是每一天的秒数</span>
<span class="token comment"># %s 是 1970/01/01 累计以来的总秒数</span>
<span class="token comment"># 由于 bash 只支持整数，因此需要加 1 来补齐 1970/01/01 当天</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># echo $(($(date --date='2015/05/04' +%s)/86400+1))</span>
<span class="token number">16559</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>密码不可被修改的天数：与第 3 个字段相比</p> <p>也就是该密码最近修改之后，需要经过几天后才可以修改，0 标识不限制，非 0 ，比如 20，则标识 20 天内都无法修改密码</p></li> <li><p>密码需要重新锈钢的天数：与第 3 个字段相比</p> <p>也就是该密码在最近修改之后，生效的天数，如果超过这个天数则该密码为过期，不可使用。99999=273 年，也大概标识不限制了</p></li> <li><p>密码需要变更期限前的警告天数：与第 5 个字段相比</p> <p>在到期前 n 天，系统发出警告给该账户，告诉你该账户还有 n 天密码过期了，请尽快修改该密码。如上面的例子为 7 天，则到期之前 7 天内，系统会警告该用户</p></li> <li><p>密码过期后的账户宽限时间：与第 5 个字段相比</p> <p>密码有效期 = 更新日期（3 字段） + 重新变更日期（5 字段），过了该期限后用户依旧没有更新密码，那么该密码就算过期了。虽然过期了，但是还可以登录系统取得 bash。不过，当你登录系统时，系统会强制要求必须重新设置密码才能登录继续使用，这就是密码过期特性</p> <p>该字段意思为：当密码过期几天后，那么再登录系统则完全无法登录了</p></li> <li><p>账户失效日期</p> <p>与第 3 个字段一样，使用的是 1970 年以来的总数日设置的。表示该账户在此规定的日期之后，将无法再使用。这就是账户失效，而无论密码是否有过期，该账户都无法使用</p> <p>该字段一般会用在收费服务的系统中，规定一个日期让该账户无法使用</p></li> <li><p>保留：保留字段，防止以后有新功能的加入</p></li></ol> <p>由于 shadow 的重要性，因此不可随意修改，但是如果忘记密码了怎么办？</p> <ul><li>一般用户密码忘记：找系统管理员帮忙，可以以 root 身份使用 passwd 指令来处理，而不需要旧密码</li> <li>root 密码忘记：这个就麻烦了，只有通过各种手段进入 Linux 再去修改 /etc/shadow 文件，比如
<ul><li>第 19 章中讲解的重启进入单人维护模式，系统会主动的给予 root 权限的 bash 接口，此时再用 passwd 修改密码即可</li> <li>使用 Live CD 开机后挂载根目录去修改 /etc/shadow 文件，将 root 的密码字段清空，再登录时就相当于不要密码了</li></ul></li></ul> <p>另外，shadow 的密码加密机制，可以通过以下指令获取</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># authconfig --test | grep hashing</span>
 password hashing algorithm is sha512		<span class="token comment"># 密码加密算法为 sha512</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="关于群组：有效与初始群组、groups、newgrp"><a href="#关于群组：有效与初始群组、groups、newgrp" class="header-anchor">#</a> 关于群组：有效与初始群组、groups、newgrp</h2> <p>上面讲解了两个文件，GUID 对应的两个文件则是 <code>/etc/group 和 /etc/gshadow</code></p> <h3 id="etc-group-文件结构"><a href="#etc-group-文件结构" class="header-anchor">#</a> <code>/etc/group 文件结构</code></h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># head -n 4 /etc/group</span>
root:x:0:
bin:x:1:
daemon:x:2:
sys:x:3:
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>共 4 个字段</p> <ol><li><p>组名：与第三字段 GID 对应</p></li> <li><p>群组密码</p> <p>通常不需要设置，如果非要设置，该配置也移动到 /etc/gshadow 文件中了。目前很少有机会设置群组管理员</p></li> <li><p>GID：与 /etc/passwd 中第 4 个字段对应</p></li> <li><p>此群组支持的账户名称</p> <p>一个账户可以加入多个群组，某个账户加入此群组时，将该账户填入该字段即可，比如 mrcode 与 alex 加入 root 群组，该字段内容为 <code>mrcode,alex</code>，整行数据为 <code>root:x:0:mrcode,alex</code></p></li></ol> <p>下面为图示 <code>/etc/pgroup 、 /etc/passwd 、/etc/shadow</code> 三个文件之间的关联关系</p> <p><img src="/linux-tutorial/assets/img/image-20200219172929946.29544c6f.png" alt="image-20200219172929946"></p> <p>还有一个问题，用户可以有多个群组，那么在工作的时候以哪个群组为准？下面来讲解 <strong>有效群组</strong> 的概念</p> <h3 id="有效群组（effective-group）与初始群组（inital-group）"><a href="#有效群组（effective-group）与初始群组（inital-group）" class="header-anchor">#</a> 有效群组（effective group）与初始群组（inital group）</h3> <p>每个使用者在 <code>/etc/passwd</code> 中的第 4 个字段是 GID，该 GID 则是初始群组，当用户登录系统，立刻就拥有该群组的相关权限。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 没有添加次要群组的信息</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># grep mrcode /etc/passwd /etc/group /etc/gshadow</span>
/etc/passwd:mrcode:x:1000:1000:mrcode:/home/mrcode:/bin/bash	<span class="token comment"># 这里有的 1000 gid</span>
/etc/group:mrcode:x:1000:mrcode	<span class="token comment"># 这个是 1000 对应的组，书上说在新版中初始群组名称不会在这一行的 第 4 个字段出现了，现在这里是出现了的，不知道是什么原因</span>
/etc/gshadow:mrcode:<span class="token operator">!</span><span class="token operator">!</span>::mrcode


<span class="token comment"># -G 修改用户所附加的群组，次要群组，也就是说，把 mrcode 账户分配给了 users 这个用户组</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># usermod -a -G users mrcode</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># grep mrcode /etc/passwd /etc/group /etc/gshadow</span>
/etc/passwd:mrcode:x:1000:1000:mrcode:/home/mrcode:/bin/bash	<span class="token comment"># 这里 gid 指向的是 初始群组</span>
/etc/group:users:x:100:mrcode		<span class="token comment"># 这一行是多出来的，把 mrcode 账户添加到了 users 这个用户组后面</span>
/etc/group:mrcode:x:1000:mrcode		
/etc/gshadow:users:::mrcode			<span class="token comment"># 这一行是多出来的</span>
/etc/gshadow:mrcode:<span class="token operator">!</span><span class="token operator">!</span>::mrcode

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>那么如上， mrcode 就拥有一个初始群组 GID=1000 的（mrcode 组）和 users 组，因此在读取/写入/执行文件时，针对群组部分，只要是 mrcode 与 users 群组拥有的功能，使用者 mrcode 都可以拥有。不过这个是针对已经存在的文件而言，如果要建立一个新的文件或则是新的目录，那么新文件的群组是  mrcode 还是 users？ 这个就需要检查当时的有效群组了</p> <h3 id="groups：有效与支持群组的观察"><a href="#groups：有效与支持群组的观察" class="header-anchor">#</a> groups：有效与支持群组的观察</h3> <p>如果已 mrcode 这个使用者的身份登录后，可以通过 groups 指令知道我所有支持的群组</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>mrcode@study ~<span class="token punctuation">]</span>$ <span class="token function">groups</span>
mrcode <span class="token function">users</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>这里输出了两个群组，和上述查看到文件中内容一致，那么 <strong>第一个输出的即为有效群组</strong>，也就是说现在已 touch 建立一个新文件，那么该文件的拥有者为 mrcode，群组也是 mrcode 组</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>mrcode@study ~<span class="token punctuation">]</span>$ <span class="token function">touch</span> <span class="token builtin class-name">test</span>
<span class="token punctuation">[</span>mrcode@study ~<span class="token punctuation">]</span>$ ll <span class="token builtin class-name">test</span>
-rw-rw-r--. <span class="token number">1</span> mrcode mrcode <span class="token number">0</span> <span class="token number">2</span>月  <span class="token number">19</span> <span class="token number">18</span>:01 <span class="token builtin class-name">test</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="newgrp：有效群组的切换"><a href="#newgrp：有效群组的切换" class="header-anchor">#</a> newgrp：有效群组的切换</h3> <p>newgrp 指令可以切换有效群组，前提为，你已经有支持的群组</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>mrcode@study ~<span class="token punctuation">]</span>$ newgrp <span class="token function">users</span>
<span class="token punctuation">[</span>mrcode@study ~<span class="token punctuation">]</span>$ <span class="token function">groups</span>
<span class="token function">users</span> mrcode		<span class="token comment"># 第一个输出也已经修改了</span>
<span class="token punctuation">[</span>mrcode@study ~<span class="token punctuation">]</span>$ <span class="token function">touch</span> test2
<span class="token punctuation">[</span>mrcode@study ~<span class="token punctuation">]</span>$ ll test*
-rw-rw-r--. <span class="token number">1</span> mrcode mrcode <span class="token number">0</span> <span class="token number">2</span>月  <span class="token number">19</span> <span class="token number">18</span>:01 <span class="token builtin class-name">test</span>
-rw-r--r--. <span class="token number">1</span> mrcode <span class="token function">users</span>  <span class="token number">0</span> <span class="token number">2</span>月  <span class="token number">19</span> <span class="token number">18</span>:03 test2		<span class="token comment"># 可以看到已经变更了</span>
<span class="token punctuation">[</span>mrcode@study ~<span class="token punctuation">]</span>$ <span class="token builtin class-name">exit</span>	<span class="token comment"># 最后记得离开 newgrp 环境</span>
<span class="token builtin class-name">exit</span>
<span class="token punctuation">[</span>mrcode@study ~<span class="token punctuation">]</span>$ <span class="token function">groups</span>
mrcode <span class="token function">users</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>newgrp 指令可以变更目前用户的有效群组，而且是以另外一个 shell 来提供这个功能，</p> <p><img src="/linux-tutorial/assets/img/image-20200220164846764.07e69e3b.png" alt="image-20200220164846764"></p> <p>上图是一个示意图，图中 dmtsai 是书上的用户名（笔者这里用的是 mrcode），新的 shell 的有效 GID 对应的是 users，虽然用户的环境设置（例如环境变量等其他数据）不会有影响，但是使用者的「群组权限」会被重新计算。</p> <p>那么切换有效群组的前提是，你需要加入到这个组，可以通过两种方法加入：</p> <ul><li>root 身份使用 usermod 加入</li> <li>没有 root 身份，但是有设置群组管理员，可以让群组管理员通过  gpasswd 加入他所管理的群组中（后续讲解）</li></ul> <h3 id="etc-gshadow"><a href="#etc-gshadow" class="header-anchor">#</a> <code>/etc/gshadow</code></h3> <p>可以使用 newgrp 来切换有效群组，但是如果对 gshadow 不懂的话，可能也无法顺利使用 newgrp</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># head -n 4 /etc/gshadow</span>
root:::
bin:::
daemon:::
sys:::

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>该文件每行有 4 个字段</p> <ol><li>组名</li> <li>密码栏：开头为 <code>!</code> 标识无合法密码，所以无群组管理员</li> <li>群组管理员的账户（相关信息在 gpasswd 指令中介绍）</li> <li>有加入该群组支持的所属账户（与 /etc/group 内容相同）</li></ol> <p>以系统管理员角度来说，gshadow 文件最大的功能是建立群组管理员，现在很少使用群组管理员了，后续 gpasswd 指令中来实践</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zq99299/linux-tutorial/edit/master/docs/tutorial-basis/13/01.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新: :</span> <span class="time">a minute ago</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/linux-tutorial/tutorial-basis/13/" class="prev router-link-active">
        Linux 账号管理与 ACL 权限设置
      </a></span> <span class="next"><a href="/linux-tutorial/tutorial-basis/13/02.html">
        账号管理
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/linux-tutorial/assets/js/app.3ea62065.js" defer></script><script src="/linux-tutorial/assets/js/2.b00e63ff.js" defer></script><script src="/linux-tutorial/assets/js/23.578aedc7.js" defer></script><script src="/linux-tutorial/assets/js/16.b0a90d5f.js" defer></script>
  </body>
</html>
