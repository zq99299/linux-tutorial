(window.webpackJsonp=window.webpackJsonp||[]).push([[154],{670:function(s,t,a){"use strict";a.r(t);var n=a(16),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"服务器硬件数据收集"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务器硬件数据收集"}},[s._v("#")]),s._v(" 服务器硬件数据收集")]),s._v(" "),a("p",[s._v("如果不想拆机的话，可以通过软件来收集到你的硬件信息")]),s._v(" "),a("h2",{attrs:{id:"用系统内置-dmidecode-解析硬件设备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用系统内置-dmidecode-解析硬件设备"}},[s._v("#")]),s._v(" 用系统内置 dmidecode 解析硬件设备")]),s._v(" "),a("p",[s._v("dmidecode 可以解析 CPU 型号、主板型号、内存相关型号等信息")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("dmidecode -t "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v("\n\n选项与参数：详细 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" 使用 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("man")]),s._v(" dmidecode 查阅，这里列出比较常用的\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("：详细的系统数据，包含主板型号与硬件基础数据\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("：CPU 相关数据，包括倍频、外频、核心数等\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("：系统相关插槽格式，包括 PCI、PCI-E 等\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("：每一个内存插槽的规格，若该插槽有内存，则列出该内存的容量与型号\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 范例 1：显示整个系统硬件信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dmidecode -t 1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dmidecode 3.2")]),s._v("\nGetting SMBIOS data from sysfs.\nSMBIOS "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.5")]),s._v(" present.\n\nHandle 0x0001, DMI "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" bytes\nSystem Information\n\tManufacturer: innotek GmbH\n\tProduct Name: VirtualBox\n\tVersion: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),s._v("\n\tSerial Number: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\tUUID: e4a1acbe-ffac-4762-b2c9-ed13daf9a493\n\tWake-up Type: Power Switch\n\tSKU Number: Not Specified\n\tFamily: Virtual Machine\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 范例 2：内存相关数据")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dmidecode -t 17")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dmidecode 3.2")]),s._v("\nGetting SMBIOS data from sysfs.\nSMBIOS "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.5")]),s._v(" present.\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 笔者这用的 VirtualBox 的虚拟机，不知道为啥获取不到内存的信息")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br")])]),a("h2",{attrs:{id:"硬件资源的收集与分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#硬件资源的收集与分析"}},[s._v("#")]),s._v(" 硬件资源的收集与分析")]),s._v(" "),a("p",[s._v("系统硬件是由操作系统核心所管理的，从低第 19 章的开机流程分析中了解到，内核在开机时就能够检测主机硬件并加载适当的模块来驱动硬件。而核心所检测到的各项硬件配置，会被记录在 "),a("code",[s._v("/proc/ 与 /sys/")]),s._v(" 中，包括 "),a("code",[s._v("/proc/cpuinfo")]),s._v("、"),a("code",[s._v("/proc/paritions")]),s._v("、"),a("code",[s._v("/proc/interrupts")]),s._v("。至于更多的  "),a("code",[s._v("/proc")]),s._v(" 内容，可以前往 "),a("RouterLink",{attrs:{to:"/tutorial-basis/16/04.html#proc-代表的意义"}},[s._v("第 16 章回顾")])],1),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("核心检测到的硬件可能并非完全正确，因为它仅是使用最适当的模块来驱动这个硬件，所以由概率会误判。")]),s._v(" "),a("p",[s._v("你可能想要以最新最正确的模块来驱动你的硬件，此时，重新编译核心是其中一条可以达到的方向。")])]),s._v(" "),a("p",[s._v("除了直接查看 "),a("code",[s._v("/proc")]),s._v(" 下的文件内容之外，Linux 提供了几个简单的指令来讲核心所检测到的硬件信息调用出来，常见的指令有：")]),s._v(" "),a("ul",[a("li",[s._v("gdisk：第 7 章中用过，gdisk -l 将分区表列出")]),s._v(" "),a("li",[s._v("dmesg：第 16 章中用过，观察核心运行过程中所显示的各项信息")]),s._v(" "),a("li",[s._v("vmstat：第 16 章中用过，可分析系统（CPU、RAM、IO）目前的状态")]),s._v(" "),a("li",[s._v("lspci：列出整个 PC 系统的 PCI 接口设备")]),s._v(" "),a("li",[s._v("lsusb：列出各个 USB 端口的状态，与链接的 USB  设备")]),s._v(" "),a("li",[s._v("iostat：与 vmstat 类似，可实时列出整个 CPU 与接口设备的 Input/Output 状态")])]),s._v(" "),a("h3",{attrs:{id:"lspci"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lspci"}},[s._v("#")]),s._v(" lspci")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("lspci "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-vvn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n-v：显示更多的 PCI 接口设备的详细信息\n-vv：比 -v 还要更详细的信息\n-n：直接观察 PCI 的 ID 而不是厂商名称\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 范例 1： 查询 PCI 总线相关设备")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# lspci")]),s._v("\n00:00.0 Host bridge: Intel Corporation 440FX - 82441FX PMC "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Natoma"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rev 02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n00:01.0 ISA bridge: Intel Corporation 82371SB PIIX3 ISA "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Natoma/Triton II"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n00:01.1 IDE interface: Intel Corporation 82371AB/EB/MB PIIX4 IDE "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rev 01"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n00:02.0 VGA compatible controller: VMware SVGA II Adapter\n00:03.0 Ethernet controller: Intel Corporation 82540EM Gigabit Ethernet Controller "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rev 02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n00:04.0 System peripheral: InnoTek Systemberatung GmbH VirtualBox Guest Service\n00:05.0 Multimedia audio controller: Intel Corporation 82801AA AC "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("97")]),s._v(" Audio Controller "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rev 01"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n00:06.0 USB controller: Apple Inc. KeyLargo/Intrepid USB\n00:07.0 Bridge: Intel Corporation 82371AB/EB/MB PIIX4 ACPI "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rev 08"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n00:08.0 Ethernet controller: Intel Corporation 82540EM Gigabit Ethernet Controller "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rev 02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n00:0d.0 SATA controller: Intel Corporation 82801HM/HEM "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ICH8M/ICH8M-E"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" SATA Controller "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("AHCI mode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rev 02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果想要了解更详细的信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下面这个是什么，不清楚，笔者的虚拟机与作者的不一样")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# lspci -s 00:03.0 -vv")]),s._v("\n00:03.0 Ethernet controller: Intel Corporation 82540EM Gigabit Ethernet Controller "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rev 02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tSubsystem: Intel Corporation PRO/1000 MT Desktop Adapter\n\tControl: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx-\n\tStatus: Cap+ 66MHz+ UDF- FastB2B- ParErr- "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DEVSEL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("medium "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("TAbort- "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("TAbort- "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("MAbort- "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("SERR- "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("PERR- INTx-\n\tLatency: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("63750ns min"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tInterrupt: pin A routed to IRQ "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v("\n\tRegion "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": Memory at f4200000 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),s._v("-bit, non-prefetchable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("size"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("128K"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\tRegion "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": I/O ports at d020 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("size"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\tCapabilities: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("dc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Power Management version "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n\t\tFlags: PMEClk- DSI+ D1- D2- "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("AuxCurrent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0mA PME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("D0-,D1-,D2-,D3hot-,D3cold-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\tStatus: D0 NoSoftRst- PME-Enable- "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DSel")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DScale")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" PME-\n\tCapabilities: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("e4"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" PCI-X non-bridge device\n\t\tCommand: DPERE- ERO+ "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RBC")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("OST")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\t\tStatus: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Dev")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ff:1f.0 64bit- 133MHz- SCD- USC- "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DC")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("simple "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DMMRBC")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DMOST")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DMCRS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" RSCEM- 266MHz- 533MHz-\n\tKernel driver "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" use: e1000\n\tKernel modules: e1000\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br")])]),a("p",[a("code",[s._v("-s")]),s._v(" 后面是每个设备总线、插槽与相关函数的功能，它是硬件检测所得到的数据，可以通过 "),a("code",[s._v("/usr/share/hwdata/pci.ids")]),s._v(" 来了解这些数据串的含义")]),s._v(" "),a("p",[s._v("pci.ids 文件是 PCI 的标准 ID 与厂牌名称对应表，另外 "),a("code",[s._v("lspci")]),s._v(" 指令的数据是从 "),a("code",[s._v("/proc/bus/pci")]),s._v(" 目录下取出来的，由于硬件发展太过快速，你的 pci.ids 文件有可能落伍了，可通过如下方式在线更新")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("update-pciids\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"lsusb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lsusb"}},[s._v("#")]),s._v(" lsusb")]),s._v(" "),a("p",[s._v("usb 设备数据")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("lsusb "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n-t：使用类似树状目录来显示各个 USB 端口的相关性\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 范例 1：列出当前主机上 USB 各端口状态")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# lsusb")]),s._v("\nBus 001 Device 001: ID 1d6b:0001 Linux Foundation "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(" root hub\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 笔者这里没有连接设备到 USB 上，就是显示上面那个箱子")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 书上有连接的，数据大概如下")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Bus 001 Device 001: ID 1d6b:0001 Adomax Technology Co., LTd")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 那么设备 ID 就是 1d6b:0001，对应的厂商与产品为 Adomax")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("这里的 ID 与厂商型号对应表在 "),a("code",[s._v("/usr/share/hwdata/pci.ids")]),s._v(" 中")]),s._v(" "),a("h3",{attrs:{id:"iostat"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#iostat"}},[s._v("#")]),s._v(" iostat")]),s._v(" "),a("p",[s._v("磁盘开机到现在，已经存取多少数据了？就可以通过 iostat 指令来查询（如果该软件未安装，可通过 "),a("code",[s._v("yum install sysstat")]),s._v(" 安装）")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("iostat "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-c"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-k"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("间隔秒数"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("检测次数"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n-c：仅显示 CPU 的状态\n-d：仅显示存储设备的状态，不可与 -c 一起使用\n-k：默认显示的是 block，可以改成 k bytes 的大小来显示\n-m：改成 MB 单位显示\n-t：显示日期\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 范例 1：显示当前系统 CPU 与存储设备的状态")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# iostat")]),s._v("\nLinux "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.10")]),s._v(".0-1062.el7.x86_64 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("study.centos.mrcode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("年04月03日 \t_x86_64_\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" CPU"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# CPU 信息")]),s._v("\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.07")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.03")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.22")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.29")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("98.38")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 磁盘信息")]),s._v("\nDevice:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn\nsda               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.35")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("62.23")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.98")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("828738")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("52981")]),s._v("\ndm-0              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.17")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("59.80")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.82")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("796302")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50933")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 含义如下")]),s._v("\ntps：平均每秒传送次数，与数据传输「次数」有关，非容量\nkB_read/： 开机到现在，平均的读取单位\nkB_wrtn/s：开机到现在，平均的写入单位\nkB_read：  开机到现在，总共读出来的文件单位\nkB_wrtn：  开机到现在，总共写入的文件单位\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 范例 2：仅针对 sda ，每 2 秒监测一次，总共监测 3 次")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# iostat -d 2 3 sda")]),s._v("\nLinux "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.10")]),s._v(".0-1062.el7.x86_64 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("study.centos.mrcode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("年04月03日 \t_x86_64_\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" CPU"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nDevice:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn\nsda               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.31")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("60.39")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.88")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("828746")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("53191")]),s._v("\n\nDevice:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn\nsda               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\nDevice:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn\nsda               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 需要注意的是：第一次是开机到现在的数据")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 第 2 次则是两次直接的系统传输值")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br")])]),a("h2",{attrs:{id:"了解磁盘的健康状态"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#了解磁盘的健康状态"}},[s._v("#")]),s._v(" 了解磁盘的健康状态")]),s._v(" "),a("p",[s._v("在服务器上，最重要的就是「数据安全」，数据是放在磁盘中的，那么对于磁盘的健康状况则是你需要关注的。")]),s._v(" "),a("p",[s._v("可以通过 smartd 指令来达成，SMART（Self-Monitoring，Analysis and Reporting Technology System）的缩写，主要用来监测目前常见的 ATA 与 SCSI 接口的磁盘。前提是，被监测的磁盘也必须要 "),a("strong",[s._v("支持 SMART 协议")]),s._v("。")]),s._v(" "),a("p",[s._v("不过虚拟机磁盘不支持 smart 协议，无法进行测试。")]),s._v(" "),a("p",[s._v("比如笔者使用指令来监测虚拟机磁盘")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# smartctl -a /dev/sda")]),s._v("\nsmartctl "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v("-12-30 r4883 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("x86_64-linux-3.10.0-1062.el7.x86_64"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("local build"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nCopyright "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("C"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2002")]),s._v("-18, Bruce Allen, Christian Franke, www.smartmontools.org\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" START OF INFORMATION SECTION "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nDevice Model:     VBOX HARDDISK\nSerial Number:    VBa19abe2f-1d5f9384\nFirmware Version: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("\nUser Capacity:    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42,949")]),s._v(",672,960 bytes "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42.9")]),s._v(" GB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nSector Size:      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes logical/physical\nDevice is:        Not "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" smartctl database "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("for details use: -P showall"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nATA Version is:   ATA/ATAPI-6 published, ANSI INCITS "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("361")]),s._v("-2002\nLocal Time is:    Fri Apr  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":04:40 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" CST\nSMART support is: Unavailable - device lacks SMART capability.\n\nA mandatory SMART "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" failed: exiting. To continue, "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" one or "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'-T permissive'")]),s._v(" options.\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里就报错了，没有继续下去")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[s._v("下面直接用书上的信息")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1. 用 smartctl 来显示完整的 /dev/sda 的信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# smartctl -a /dev/sda")]),s._v("\nsmartctl "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2013")]),s._v("-07-26 r3841 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("x86_64-linux-3.10.0-229.el7.x86_64"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("local build"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nCopyright "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("C"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2002")]),s._v("-13, Bruce Allen, Christian Franke, www.smartmontools.org\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 首先来输出一下这部磁盘的整体信息状况！包括制造商、序号、格式、 SMART 支持度等等！")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" START OF INFORMATION SECTION "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nDevice Model: QEMU HARDDISK\nSerial Number: QM00002\nFirmware Version: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.12")]),s._v(".1\nUser Capacity: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2,148")]),s._v(",073,472 bytes "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.14")]),s._v(" GB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nSector Size: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes logical/physical\nDevice is: Not "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" smartctl database "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("for details use: -P showall"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nATA Version is: ATA/ATAPI-7, ATA/ATAPI-5 published, ANSI NCITS "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("340")]),s._v("-2000\nLocal Time is: Wed Sep "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":10:38 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2015")]),s._v(" CST\nSMART support is: Available - device has SMART capability.\nSMART support is: Enabled\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" START OF READ SMART DATA SECTION "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nSMART overall-health self-assessment "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" result: PASSED\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 接下来则是一堆基础说明！ 鸟哥这里先略过这段资料喔！")]),s._v("\nGeneral SMART Values:\nOffline data collection status: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0x82"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" Offline data collection activity\nwas completed without error.\nAuto Offline Data Collection: Enabled.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("中间省略"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 再来则是有没有曾经发生过磁盘错乱的问题登录！")]),s._v("\nSMART Error Log Version: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nNo Errors Logged\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当你下达过磁盘自我检测的过程，就会被记录在这里了！")]),s._v("\nSMART Self-test log structure revision number "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nNum Test_Description Status Remaining LifeTime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hours"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" LBA_of_first_error\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1 Short offline Completed without error 00% 4660 -")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2 Short offline Completed without error 00% 4660 -")]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2. 命令磁盘进行一次自我检测的动作，然后再次观察磁盘状态！")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# smartctl -t short /dev/sda")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# smartctl -a /dev/sda")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("前面省略"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 底下会多出一个第三笔的测试信息！看一下 Status 的状态， 没有问题就是好消息！")]),s._v("\nSMART Self-test log structure revision number "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nNum Test_Description Status Remaining LifeTime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hours"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" LBA_of_first_error\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1 Short offline Completed without error 00% 4660 -")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2 Short offline Completed without error 00% 4660 -")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3 Short offline Completed without error 00% 4660")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br")])]),a("p",[s._v("特别强调：磁盘自检，可能磁盘的 I/O 状态会比较频繁，因此不建议在系统忙碌时进行")])])}),[],!1,null,null,null);t.default=e.exports}}]);