(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{571:function(s,a,t){"use strict";t.r(a);var n=t(16),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"文件系统的特殊观察与操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文件系统的特殊观察与操作"}},[s._v("#")]),s._v(" 文件系统的特殊观察与操作")]),s._v(" "),t("p",[s._v("文件系统是在是非常有趣的东西，鸟哥学了好几年很多东西都不懂，这里有一些经验以供参考")]),s._v(" "),t("h2",{attrs:{id:"磁盘空间之浪费问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#磁盘空间之浪费问题"}},[s._v("#")]),s._v(" 磁盘空间之浪费问题")]),s._v(" "),t("p",[s._v("前面 ext2 data block 中谈到一个 block 只能放置一个文件，因此太多小文件会浪费很多的磁盘容量。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -sh")]),s._v("\n总用量 16K\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K -rw-------. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root   root   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".2K "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":32 anaconda-ks.cfg\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K -rw-r--r--. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root   root    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("451")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("月  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2014")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("crontab")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" lrwxrwxrwx. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root   root     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" 00:00 crontab2 -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /etc/crontab\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K -rw-r--r--. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root   root   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".2K "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":42 initial-setup-ks.cfg\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K -rwxr-xrwx. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" mrcode mrcode "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".2K "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":30 initial-setup-ks-mrcode.cfg\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("上述的总用量是每个文件所使掉 blcok 的容量的汇总，但是 哪个 crontab 文件实际只有用 451bytes，但是他却占用了整个 block （每个 block 为 4k）。所以总共占用了 16k 的容量，但是实际这里的文件总容量不到 7k")]),s._v(" "),t("p",[s._v("当讨论磁盘空间浪费问题的时候，需要考虑到文件容量的损耗")]),s._v(" "),t("h2",{attrs:{id:"利用-gnu-的-parted-进行分区行为（optional）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#利用-gnu-的-parted-进行分区行为（optional）"}},[s._v("#")]),s._v(" 利用 GNU 的 parted 进行分区行为（Optional）")]),s._v(" "),t("p",[s._v("parted 同时支持 gdisk 和 fdisk 分区")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("parted")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("装置"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("指令"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("参数"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n选项与参数，指令功能：\n\t新增分区：mkpart "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("primary"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("logical"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("extended"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ext4"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("vfat"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("xfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 开始 结束\n\t显示分区：print\n\t删除分区：rm "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("partition"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("实践练习")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出目前本机的分区表资料")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# parted /dev/sda print")]),s._v("\nModel: ATA VBOX HARDDISK "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("scsi"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 磁盘接口与型号")]),s._v("\nDisk /dev/sda: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("43")]),s._v(".8GB\t\t\t\t\t\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 磁盘文件名与容量")]),s._v("\nSector size "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("logical/physical"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": 512B/512B\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#每个扇区大小")]),s._v("\nPartition Table: gpt\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 分区表 gpt")]),s._v("\nDisk Flags: pmbr_boot\n\nNumber  Start   End     Size    File system     Name                  标志\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      1049kB  3146kB  2097kB                                        bios_grub\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("      3146kB  1077MB  1074MB  xfs\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("      1077MB  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("33")]),s._v(".3GB  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),s._v(".2GB                                        lvm\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("33")]),s._v(".3GB  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("34")]),s._v(".4GB  1074MB  xfs             Linux filesystem\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("34")]),s._v(".4GB  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("35")]),s._v(".4GB  1074MB  ext4            Microsoft basic data\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("35")]),s._v(".4GB  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("36")]),s._v(".0GB  537MB   linux-swap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("v1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  Linux swap\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("p",[s._v("上面是最简单的 parted 指令功能简介，可以使用 man parted 或则 "),t("code",[s._v("parted /dev/sda help mkpart")]),s._v("查询更详细的数据。下面解释下每个字段是啥意思")]),s._v(" "),t("ul",[t("li",[s._v("Number：分区槽号码，比如 1 表示 /dev/sda1")]),s._v(" "),t("li",[s._v("Start：分区的其实位置在这颗磁盘的多少 MB 处？这里以容量作为单位")]),s._v(" "),t("li",[s._v("End：此分区的结束位置在这颗磁盘的多少 MB 处？")]),s._v(" "),t("li",[s._v("Size：由上述数据分析，得到这个分区槽有多少容量")]),s._v(" "),t("li",[s._v("File system：分析可能的文件系统类型")]),s._v(" "),t("li",[s._v("Name：如同 gdisk 的 System ID 的意思")])]),s._v(" "),t("p",[s._v("不过这里你发现没有，start 与 end 的单位都不一样，看起来很费劲，可以通过以下指令固定")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# parted /dev/sda unit mb print")]),s._v("\nModel: ATA VBOX HARDDISK "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("scsi"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nDisk /dev/sda: 43772MB\nSector size "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("logical/physical"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": 512B/512B\nPartition Table: gpt\nDisk Flags: pmbr_boot\n\nNumber  Start    End      Size     File system     Name                  标志\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".05MB   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".15MB   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".10MB                                         bios_grub\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".15MB   1077MB   1074MB   xfs\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("      1077MB   33293MB  32216MB                                        lvm\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("      33293MB  34367MB  1074MB   xfs             Linux filesystem\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("      34367MB  35441MB  1074MB   ext4            Microsoft basic data\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("      35441MB  35978MB  537MB    linux-swap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("v1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  Linux swap\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("p",[s._v("如果想将原本的 MBR 和 GPT 分区表互相换，也可以使用 parted，不过不要用本次的 sda 来测试，因为分区表格式不能转换，该磁盘上的系统会损坏的。")]),s._v(" "),t("p",[s._v("下面测试，笔者就没有条件测试了，直接记录笔记")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将 /dev/sda 原本是 MBR 分区变成 GPT 分区表")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("parted")]),s._v(" /dev/sda print\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nPartition Table: msdos  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# MBR 就是现实 msdos 格式")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 改变成 gpt 分区")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("parted")]),s._v(" /dev/sda mklabel gpt\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("新的示例：建立一个全新的分区槽，格式化为 vfat 格式，且挂载到 /data/win 目录")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看分区表情况")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# parted /dev/sda print")]),s._v("\nModel: ATA VBOX HARDDISK "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("scsi"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nDisk /dev/sda: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("43")]),s._v(".8GB\nSector size "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("logical/physical"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": 512B/512B\nPartition Table: gpt\nDisk Flags: pmbr_boot\n\nNumber  Start   End     Size    File system     Name                  标志\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      1049kB  3146kB  2097kB                                        bios_grub\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("      3146kB  1077MB  1074MB  xfs\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("      1077MB  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("33")]),s._v(".3GB  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),s._v(".2GB                                        lvm\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("33")]),s._v(".3GB  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("34")]),s._v(".4GB  1074MB  xfs             Linux filesystem\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("34")]),s._v(".4GB  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("35")]),s._v(".4GB  1074MB  ext4            Microsoft basic data\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("35")]),s._v(".4GB  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("36")]),s._v(".0GB  537MB   linux-swap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("v1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  Linux swap\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 找到最后一个分区的 end 位置，作为下一个分区的起始位置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# parted /dev/sda mkpart primary fat32 36.0GB 36.5GB")]),s._v("\n信息: You may need to update /etc/fstab.\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 再次查看，就看到第 7 个了")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# parted /dev/sda print")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("36")]),s._v(".0GB  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("36")]),s._v(".5GB  522MB                   primary\n \n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 确认真的存在")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# partprobe ")]),s._v("\nWarning: 无法以读写方式打开 /dev/sr0 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("只读文件系统"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("。/dev/sr0 已按照只读方式打开。\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# lsblk /dev/sda7")]),s._v("\nNAME MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\nsda7   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(":7    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  498M  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" part \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 格式化分区为 vfat 格式")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkfs -t vfat /dev/sda7")]),s._v("\nmkfs.fat "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),s._v(".20 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" Jun "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2013")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# blkid /dev/sda7")]),s._v("\n/dev/sda7: "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SEC_TYPE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"msdos"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("UUID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"72BE-0556"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TYPE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vfat"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PARTLABEL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"primary"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PARTUUID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3a31eca1-2f5d-4960-8d61-739c4461b30f"')]),s._v(" \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加到自动挂载")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nano")]),s._v(" /etc/fstab\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("UUID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"72BE-0556"')]),s._v(" /data/win vfat defaults "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir /data/win")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mount -a")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# df /data/win/")]),s._v("\n文件系统        1K-块  已用   可用 已用% 挂载点\n/dev/sda7      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("509672")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("509672")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /data/win\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br")])]),t("p",[s._v("事实上，你应该使用 gdisk 来处理 GPT 分区，不过 parted 非常适合通过脚本来一口气将分区全部建立，因为 parted 可以不用与用户交互")])])}),[],!1,null,null,null);a.default=e.exports}}]);