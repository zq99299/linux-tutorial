(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{456:function(s,n,t){s.exports=t.p+"assets/img/markdown-img-paste-20191022221802204.914cacc5.png"},457:function(s,n,t){s.exports=t.p+"assets/img/markdown-img-paste-20191022223136195.c8744b11.png"},458:function(s,n,t){s.exports=t.p+"assets/img/markdown-img-paste-20191022225353742.9a9f737a.png"},567:function(s,n,t){"use strict";t.r(n);var a=t(16),e=Object(a.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"文件系统的简单操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件系统的简单操作"}},[s._v("#")]),s._v(" 文件系统的简单操作")]),s._v(" "),a("p",[s._v("本章讲解如何查询整体文件系统的总容量与每个目录所占用的容量。\n此外前面谈到的文件类型中尚未将清楚的连接文档（link file）也会在这里介绍")]),s._v(" "),a("h2",{attrs:{id:"磁盘与目录的容量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#磁盘与目录的容量"}},[s._v("#")]),s._v(" 磁盘与目录的容量")]),s._v(" "),a("p",[s._v("磁盘整体数据是在 superblock 区块中，但是每个各别文件的容量则在 inode 中记载的。\n可以使用如下指令查询：")]),s._v(" "),a("ul",[a("li",[s._v("df：列出文件系统的整体磁盘使用量")]),s._v(" "),a("li",[s._v("du：评估文件系统的磁盘使用量（常用在预估目录所占容量）")])]),s._v(" "),a("h3",{attrs:{id:"df"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#df"}},[s._v("#")]),s._v(" df")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-ahikHTm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("目录或文件名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("a：列出所有的文件系统，包括系统特有的 /proc 等文件系统")]),s._v(" "),a("li",[s._v("k：以 KBytes 的容量显示个文件系统")]),s._v(" "),a("li",[s._v("m：以 MBytes 的容量显示")]),s._v(" "),a("li",[s._v("h：以人类容易阅读的 GBytes、MBytes、KBytes 等格式自行显示")]),s._v(" "),a("li",[s._v("H：以 M=1000K 取代 M=1024k 的进位方式")]),s._v(" "),a("li",[s._v("T：连同该 partition 的 filesystem 名称（例如 xfs）也列出")]),s._v(" "),a("li",[s._v("i：不用磁盘容量，而已 inode 的数量来显示")])]),s._v(" "),a("p",[s._v("实践练习")]),s._v(" "),a("p",[s._v("将系统内所有的 filesystem 列出来")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mrcode@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v("\nFilesystem              1K-blocks    Used Available Use% Mounted on\ndevtmpfs                   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("578464")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("578464")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /dev\ntmpfs                      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("595476")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("595476")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /dev/shm\ntmpfs                      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("595476")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8660")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("586816")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("% /run\ntmpfs                      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("595476")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("595476")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /sys/fs/cgroup\n/dev/mapper/centos-root  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10475520")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4795672")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5679848")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("46")]),s._v("% /\n/dev/mapper/centos-home   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5232640")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("40552")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5192088")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /home\n/dev/sda2                 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1038336")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("174108")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("864228")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("% /boot\ntmpfs                      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("119096")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("119084")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /run/user/42\ntmpfs                      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("119096")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("119096")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /run/user/1000\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不加任何选项，会默认将系统内所有的（不含特殊内存内的文件系统与 swap）都以 1 Kbytes 的容量列出来")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /dev/shm 是与内存有关的挂载，可以先忽略")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("ul",[a("li",[s._v("Filesystem：代表该文件系统是在哪个 partition")]),s._v(" "),a("li",[s._v("1k-block2：该列下的单位为 1kb，可以利用 -h 或 -m 来改变容量")]),s._v(" "),a("li",[s._v("Used：已使用掉的磁盘空间")]),s._v(" "),a("li",[s._v("Available：可用空间")]),s._v(" "),a("li",[s._v("Use%：磁盘使用率")]),s._v(" "),a("li",[s._v("Mounted on：磁盘挂载的目录（挂载点）")])]),s._v(" "),a("p",[s._v("将容量结果以容易阅读的容量格式显示")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mrcode@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v(" -h\nFilesystem               Size  Used Avail Use% Mounted on\ndevtmpfs                 565M     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  565M   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /dev\ntmpfs                    582M     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  582M   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /dev/shm\ntmpfs                    582M  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(".5M  574M   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("% /run\ntmpfs                    582M     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  582M   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /sys/fs/cgroup\n/dev/mapper/centos-root   10G  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".6G  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".5G  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("46")]),s._v("% /\n/dev/mapper/centos-home  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".0G   40M  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".0G   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /home\n/dev/sda2               1014M  171M  844M  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("% /boot\ntmpfs                    117M   12K  117M   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /run/user/42\ntmpfs                    117M     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  117M   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /run/user/1000\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("将系统内的所有特殊文件格式及名称都列出来")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mrcode@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v(" -aT\nFilesystem              Type       1K-blocks    Used Available Use% Mounted on\nsysfs                   sysfs              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    - /sys\nproc                    proc               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    - /proc\ndevtmpfs                devtmpfs      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("578464")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("578464")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /dev\nsecurityfs              securityfs         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    - /sys/kernel/security\ntmpfs                   tmpfs         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("595476")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("595476")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /dev/shm\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里只是其中一部分，还有很多，几乎上都在内存中，例如 /proc 这个挂载点")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 因此这些特殊的文件系统都不会占用磁盘空间")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("将 /etc/ 下的可用的磁盘容量以易读格式显示")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mrcode@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v(" -h /etc/\nFilesystem               Size  Used Avail Use% Mounted on\n/dev/mapper/centos-root   10G  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".6G  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".5G  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("46")]),s._v("% /\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在 df 后面加上目录或则是文件时，df 会自动分析该目录或文件所在的 partition，")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 并将该 partition 容量显示出来，所以就可以知道该目录下又多少容量可用了")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("将目前各个 partition 当中可用的 inode 数量列出")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mrcode@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v(" -ih\nFilesystem              Inodes IUsed IFree IUse% Mounted on\ndevtmpfs                  142K   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("382")]),s._v("  141K    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /dev\ntmpfs                     146K     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  146K    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /dev/shm\ntmpfs                     146K   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("653")]),s._v("  145K    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /run\ntmpfs                     146K    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("  146K    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /sys/fs/cgroup\n/dev/mapper/centos-root   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".0M  150K  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".9M    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("% /\n/dev/mapper/centos-home   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".5M   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("237")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".5M    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /home\n/dev/sda2                 512K   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("340")]),s._v("  512K    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /boot\ntmpfs                     146K     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("  146K    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /run/user/42\ntmpfs                     146K     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  146K    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /run/user/1000\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -i 主要列出可用的 inode 剩余容量与总容量")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 会发现，通常 inode 的数量剩余逗比 block 还要多")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v("由于 df 主要读取的数据几乎都是针对一整个文件系统，因此读取的范围主要是在 Superblock 内的信息，所以该指令显示结果速度非常快速。\n在显示结果中，要特别留意根目录容量，因为我们所有的数据都是由根目录衍生出来的（这里应该说的是，当前这颗磁盘分区，没有额外的挂载，几乎上所有数据都放在了同一个分区上。")]),s._v(" "),a("p",[s._v("另外需要注意的是：如果使用 -a 参数时，系统会出现 /proc 这个挂载点，但是里面的东西\n都是 0，不要紧张。 /proc 的东西都是 linux 系统所需要加载的系统数据，\n而且是挂载在「内存中」的，所以不会占用磁盘空间")]),s._v(" "),a("p",[s._v("至于 /dev/shm/ 目录，其实是利用内存虚拟出来的磁盘空间，通常是总物理内存的一半。\n由于是透过内存仿真出来的磁盘，在该目录下建立任何数据文件时，访问速度非常快。\n只是 "),a("strong",[s._v("该目录下的东西不是持久性的，下次开机后就失效了")])]),s._v(" "),a("h3",{attrs:{id:"du"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#du"}},[s._v("#")]),s._v(" du")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("du")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-ahskm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 文件或目录名称\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("a：列出所有的文件与目录容量，默认仅统计目录下的文件量")]),s._v(" "),a("li",[s._v("h：以人类易读的容量格式显示")]),s._v(" "),a("li",[s._v("s：列出总量，而不列出每个各别的目录占用容量")]),s._v(" "),a("li",[s._v("S：不包括子目录下的总计，与 -s 有差别")]),s._v(" "),a("li",[s._v("k：以 KBytes 列出容量显示")]),s._v(" "),a("li",[s._v("m：以 MBytes 列出容量显示")])]),s._v(" "),a("p",[s._v("实践练习")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出当前目录下的所有文件容量")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# du")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("       ./.cache/dconf\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("       ./.cache/abrt\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("       ./.cache\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("       ./.dbus/session-bus\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("       ./.dbus\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       ./.config/abrt\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       ./.config\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       ./.local/share\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       ./.local\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("56")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不加参数会默认当前目录下的文件与目录所占用的磁盘空间")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 实际显示只显示了目录，不包含文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下面哪个 . 的总量为 56 K(默认是以 kbytes 显示的)，是 目录 + 文件占用的")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 看这里的几个目录加起来肯定没有 56 这么大")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出当前目录下所有文件容量（包括文件）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# du -a")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("       ./.bash_logout\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("       ./.bash_profile\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("       ./.bashrc\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("       ./.cshrc\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("       ./.tcshrc\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("       ./anaconda-ks.cfg  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 省略了很多显示结果，这里就是一个文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("       ./.cache/dconf/user\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("56")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检查根目录下每个目录所占用的容量")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# du -sm /*")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       /bin\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("138")]),s._v("     /boot\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       /dev\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v("      /etc\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("       /home\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       /lib\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       /lib64\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       /media\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       /mnt\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       /opt\ndu: 无法访问"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/proc/32240/task/32240/fd/3"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 没有那个文件或目录\ndu: 无法访问"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/proc/32240/task/32240/fdinfo/3"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 没有那个文件或目录\ndu: 无法访问"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/proc/32240/fd/3"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 没有那个文件或目录\ndu: 无法访问"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/proc/32240/fdinfo/3"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 没有那个文件或目录\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       /proc       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不占用空间")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("       /root\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("       /run\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       /sbin\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       /srv\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       /sys\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("       /tmp\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4182")]),s._v("    /usr      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以看到系统初期最大的就是这个了")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("347")]),s._v("     /var\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br")])]),a("p",[s._v("与 df 不一样，du 指令会直接到文件系统内搜寻所有的文件数据，所以上述例子显示不是很快，\n因为要搜寻文件数据。默认容量为 kb，可使用 -h 等参数来格式化容量")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -s 与 -s 的区别，看总量")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -s 为 56k 是包含了下面的所有子目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -S 不包含子目录的 只有 44k")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# du -sh")]),s._v("\n56K     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# du -Sh")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K    ./.cache/dconf\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K    ./.cache/abrt\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       ./.cache\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K    ./.dbus/session-bus\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       ./.dbus\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       ./.config/abrt\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       ./.config\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       ./.local/share\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       ./.local\n44K     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("h2",{attrs:{id:"实体链接与符号链接-ln"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实体链接与符号链接-ln"}},[s._v("#")]),s._v(" 实体链接与符号链接 ln")]),s._v(" "),a("p",[s._v("link 链接在前面 Linux 文件属性 与 Linux 文件种类与扩展名 中简单讲解过。本章详细讲解")]),s._v(" "),a("p",[s._v("链接文档有两种：")]),s._v(" "),a("ul",[a("li",[s._v("类似 windows 的快捷方式的文件")]),s._v(" "),a("li",[s._v("通过 inode 连接来产生新文档名，而不是产生新文件，"),a("strong",[s._v("称为实体链接")])])]),s._v(" "),a("h3",{attrs:{id:"hard-link-实体链接、硬式连结或实际连结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hard-link-实体链接、硬式连结或实际连结"}},[s._v("#")]),s._v(" Hard Link 实体链接、硬式连结或实际连结")]),s._v(" "),a("p",[s._v("前面文件系统中了解到：")]),s._v(" "),a("ul",[a("li",[s._v("每个文件都会占用一个 inode，文件内容由 inode 记录指向")]),s._v(" "),a("li",[s._v("想要读取该文件，必须要经过目录记录的文件名来指向到正确的 inode 号码才能读取")])]),s._v(" "),a("p",[s._v("也就是说，文件名只与目录有关，但是文件内容则与 inode 有关。\n因此有没有可能：多个文档名对应到同一个 inode 号码呢？肯定有，这就是 Hard Link 的由来。")]),s._v(" "),a("p",[s._v("简单说：hard link 只是在某个目录下新增一个文件名链接到某个 inode 号码的关联记录而已")]),s._v(" "),a("p",[s._v("例如：假设 /root/crontab 是 /etc/crontab 的实体链接（他们两个文件名都对应到同一个 inode），\n这两个文件名的所有相关信息都会一模一样（除了文件名之外）")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -i /etc/crontab")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看文件属性与 inode 号码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17639161")]),s._v(" -rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("451")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("月  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2014")]),s._v(" /etc/crontab\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 建立实体链接")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ln /etc/crontab .")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 对比两个文件的属性")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -i /etc/crontab crontab")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17639161")]),s._v(" -rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("451")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("月  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2014")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("crontab")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17639161")]),s._v(" -rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("451")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("月  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2014")]),s._v(" /etc/crontab\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[a("img",{attrs:{src:t(456),alt:""}})]),s._v(" "),a("p",[s._v("上面原始文件的 1 变成了 2，该字段称为「连结」，表示有多少个文件名链接到这个 inode 号码;")]),s._v(" "),a("ul",[a("li",[s._v("这里将任意一个文件删除，其实 inode 与 block 都还是存在的。")]),s._v(" "),a("li",[s._v("无论通过哪一个文件来编辑内容，都会反应到 inode 与 block 中")])]),s._v(" "),a("p",[s._v("一般来说，使用 hard link 设置连接文件时，磁盘空间与 inode 的数目都不会改变。\n除非遇到说，在目录中新增文件名时，刚好 block 满了，那么就会多出来一个 block 记录文件名")]),s._v(" "),a("p",[s._v("限制如下：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("不能跨 Filesystem ：不是同一个 indoe 号码了，肯定不能了")])]),s._v(" "),a("li",[a("p",[s._v("不能 link 目录：")]),s._v(" "),a("p",[s._v("如果使用 hard link 链接到目录时，链接的数据需要连同被链接目录下所有数据都建立连接。\n当新建文件时需要建立该文件的 hard link，这对环境影响太大，所以不支持")])])]),s._v(" "),a("h2",{attrs:{id:"symbolic-link-符号链接、快捷方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#symbolic-link-符号链接、快捷方式"}},[s._v("#")]),s._v(" Symbolic Link 符号链接、快捷方式")]),s._v(" "),a("p",[s._v("Symbolic 就是建立一个独立的文件，而这个文件会让数据的读取指向他 link 的那个文件名。\n原始文件被删，该文件肯定也打不开了")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 建立符号链接")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ln -s /etc/crontab crontab2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 对比")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -i /etc/crontab crontab crontab2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17639161")]),s._v(" -rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("451")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("月  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2014")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("crontab")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17639161")]),s._v(" -rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("451")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("月  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2014")]),s._v(" /etc/crontab\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以看到上面两个一模一样，有一个 hard link 和原始文件。并且他们的 inode 是 2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 而下面这个符号链接的信息和上面的都不一样，唯独后面有一个连接指向了原始文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25377009")]),s._v(" lrwxrwxrwx. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" 00:00 crontab2 -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /etc/crontab\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[a("img",{attrs:{src:t(457),alt:""}})]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-sf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 来源文件 目标文件\n\n-s：不加参数就是建立实体链接 hard link，加 -s 就是建立符号链接\n-f：如果 目标文件 存在时，就主动的将目标文件直接移除后再建立\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("实践练习")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将 /etc/passwd 复制到 /tmp 并观察 inode 与 block")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /tmp/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study tmp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cp -a /etc/passwd .")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study tmp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# du -sb; df -i")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("153266")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# du -sb 计算 /tmp/ 下有多少 bytes 容量")]),s._v("\n文件系统                  Inode 已用"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("I"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 可用"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("I"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 已用"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("I"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("% 挂载点\n/dev/mapper/centos-root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5242880")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("153177")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5089703")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("% /\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# df -i 显示 inode 的使用量")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将 /tmp/passwd 制作 hard link 称为 passwd-hd 文件，并观察文件与容量")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study tmp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ln passwd passwd-hd")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study tmp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# du -sb; df -i")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("153266")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n文件系统                  Inode 已用"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("I"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 可用"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("I"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 已用"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("I"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("% 挂载点\n/dev/mapper/centos-root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5242880")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("153177")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5089703")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("% /\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 观察总容量 153266 没有改变")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 观察已用的 inode 153177 没有改变")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将 /tmp/passwd 建立符号链接")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study tmp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# du -sb; df -i")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("153272")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n文件系统                  Inode 已用"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("I"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 可用"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("I"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 已用"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("I"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("% 挂载点\n/dev/mapper/centos-root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5242880")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("153178")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5089702")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("% /\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 观察总容量 153266 变成了 153272")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 观察已用的 inode 153177 变成了 153178")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study tmp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -li passwd*")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16797769")]),s._v(" -rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2323")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":31 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16797769")]),s._v(" -rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2323")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":31 passwd-hd\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16807525")]),s._v(" lrwxrwxrwx. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" 00:20 passwd-so -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以看到这里的符号链接文件大小 6 kb，而上面 153272 - 153266 = 6")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 删除源文件 passwd ，其他两个链接文件是否能打开？")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study tmp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rm passwd")]),s._v("\nrm：是否删除普通文件 "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"passwd"')]),s._v("？y\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study tmp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat passwd-hd")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". 正常显示\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study tmp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat passwd-so")]),s._v("\ncat: passwd-so: 没有那个文件或目录\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看状态")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study tmp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -l passwd*")]),s._v("\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2323")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":31 passwd-hd\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里后面的文件名在能链接到源文件的时候，会显示绿色，现在链接不到了就会显示红色了")]),s._v("\nlrwxrwxrwx. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" 00:20 passwd-so -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br")])]),a("p",[a("img",{attrs:{src:t(458),alt:""}})]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果使用下面的命令，将 /bin/ 目录创建了一个符号链接（快捷方式）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /bin /root/bin\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -l /root/")]),s._v("\nlrwxrwxrwx. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root   root      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" 00:28 bin -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /bin/\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 那么这个时候如果你要执行下面的命令的话，")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里千万不要执行，否则会将 bin 下的文件数据全部干掉的")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /root/bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过下面的方式查看，和硬链接一样，他们都连到了同一个 node")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 所以这里与文件链接还不一样，上面看是单独的目录 -> /bin/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里  cd 通过快捷方式进入到真正的目录下，所以操作等同于操作 bin 本身")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -lid /bin/ /root/bin/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("78")]),s._v(" dr-xr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("57344")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" 05:03 /bin/\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("78")]),s._v(" dr-xr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("57344")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" 05:03 /root/bin/\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用命令删除刚刚那个目录链接文档")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注意这里的提示。带斜杠貌似是直接指向了连接的目录，不带才是符号链接本身")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rm /root/bin/")]),s._v("\nrm: 无法删除"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/root/bin/"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 是一个目录\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rm /root/bin")]),s._v("\nrm：是否删除符号链接 "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/root/bin"')]),s._v("？y\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("p",[s._v("基本上，符号链接的用途比较广。需要掌握")]),s._v(" "),a("h3",{attrs:{id:"关于目录的-link-数量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关于目录的-link-数量"}},[s._v("#")]),s._v(" 关于目录的 link 数量")]),s._v(" "),a("p",[s._v("创建一个目录 link 会显示几？对于文件来说会显示 1.那么目录呢？")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study tmp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -ld /tmp/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# link 数量为 40")]),s._v("\ndrwxrwxrwt. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" 00:43 /tmp/\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study tmp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir testing1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study tmp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -ld /tmp/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /tmp/ link +1 变成 41 了")]),s._v("\ndrwxrwxrwt. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("41")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" 00:44 /tmp/\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 看下该目录的 link 为 2，表示有两个,是为什么？")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study tmp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -ld /tmp/testing1/")]),s._v("\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" 00:44 /tmp/testing1/\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新建立的一个目录下包含了当前目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /tmp/testing1/ /temp/testing1/.  这两个路径都链接到同一个 inode，所以 link 为 2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study tmp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -al /tmp/testing1/")]),s._v("\n总用量 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\ndrwxr-xr-x.  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" 00:44 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\ndrwxrwxrwt. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("41")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" 00:46 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])])])}),[],!1,null,null,null);n.default=e.exports}}]);