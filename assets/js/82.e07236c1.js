(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{577:function(s,n,t){"use strict";t.r(n);var a=t(16),e=Object(a.a)({},(function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"xfs-文件系统的备份与还原"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#xfs-文件系统的备份与还原"}},[s._v("#")]),s._v(" XFS 文件系统的备份与还原")]),s._v(" "),t("p",[s._v("使用 tar 通常是针对目录树系统来进行备份的工作，如果是针对整个文件系统来进行备份与还原。在 CentOS 7 中可以使用 xfsdump 与 xfsrestore 指令来进行")]),s._v(" "),t("h2",{attrs:{id:"xfs-文件系统备份-xfsdump"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#xfs-文件系统备份-xfsdump"}},[s._v("#")]),s._v(" XFS 文件系统备份 xfsdump")]),s._v(" "),t("p",[s._v("支持的功能：")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("全量备份：完整备份文件系统（full backup）")])]),s._v(" "),t("li",[t("p",[s._v("增量备份：Incremental backup")]),s._v(" "),t("p",[s._v("第一次全量备份之后，就可以选择增量备份了")]),s._v(" "),t("p",[s._v("增量备份的差异文件存放在 /var/lib/xfsdump/inventory 中")])])]),s._v(" "),t("p",[s._v("xfsdump 有如下限制：")]),s._v(" "),t("ul",[t("li",[s._v("不支持没有挂载的文件系统备份，所以只能备份已挂载的")]),s._v(" "),t("li",[s._v("必须使用 root 的权限才能操作，涉及文件系统的关系")]),s._v(" "),t("li",[s._v("只能备份 XFS 文件系统")]),s._v(" "),t("li",[s._v("备份下来的数据（文件或存储媒体）只能让 xfsrestore 解析")]),s._v(" "),t("li",[s._v("是通过文件系统的 UUID 来分辨各个备份档的，因此不能备份两个具有相同 UUID 的文件系统")])]),s._v(" "),t("p",[s._v("简单操作时的语法如下（完整的选项非常复杂）")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("xfsdump "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-L S_label"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-M M_label"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-l "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#][-f 备份档] 带备份资料")]),s._v("\nxfsdump -I\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("选项与参数：")]),s._v(" "),t("ul",[t("li",[s._v("L：xfsdump 会记录每次备份的 session 标头，这里可以填写针对此文件系统的建议说明")]),s._v(" "),t("li",[s._v("M：xfsdump 可以记录存储媒体的标头，这里可以填写此媒体的建议说明")]),s._v(" "),t("li",[s._v("l：小写的 L，指定等级。有 0~9 共 10 个等级，预设为 0 完整备份")]),s._v(" "),t("li",[s._v("f：有点类似 tar，后面接产生的文件，例如 /dev/st0 装置文件名或其他一般文件名等")]),s._v(" "),t("li",[s._v("I：从 /var/lib/xfsdump/inventory 列出目前备份的信息状态")])]),s._v(" "),t("p",[s._v("注意：xfsdump 预设仅支持文件系统的备份，并不支持目录的备份。如 /etc 不是一个独立的文件系统")]),s._v(" "),t("h3",{attrs:{id:"用-xfsdump-备份完整的文件系统"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用-xfsdump-备份完整的文件系统"}},[s._v("#")]),s._v(" 用 xfsdump 备份完整的文件系统")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1. 先确定 /boot 是独立的问价系统")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mrcode@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v(" -h /boot/\nFilesystem      Size  Used Avail Use% Mounted on\n/dev/sda2      1014M  171M  844M  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("% /boot\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 挂载点是 /boot 文件系统是 /dev/sda2 装置，是独立的文件系统")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2. 将完整备份的文件名记录为 /srv/boot.dump")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定了一个等级0，后面 lm 都是说明，后面是要保存的文件地址，最后是要备份的装置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# xfsdump -l 0 -L boot_all -M boot_all -f /srv/boot.dump /boot")]),s._v("\nxfsdump: using "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" dump "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("drive_simple"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" strategy\nxfsdump: version "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),s._v(".7 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dump "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("format")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" - "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" ^C "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" status and control\nxfsdump: level "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" dump of study.centos.mrcode:/boot\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# level 0 开始备份本机 /boot 系统\t")]),s._v("\nxfsdump: dump date: Tue Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" 03:03:50 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 备份时间")]),s._v("\nxfsdump: session id: 49ac1ac5-c63b-4778-9b87-f77f3b1d703a "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dump 的 ID")]),s._v("\nxfsdump: session label: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"boot_all"')]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 上面写的说明")]),s._v("\nxfsdump: ino map phase "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": constructing initial dump list "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开始备份")]),s._v("\nxfsdump: ino map phase "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": skipping "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("no pruning necessary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nxfsdump: ino map phase "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(": skipping "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("only one dump stream"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nxfsdump: ino map construction complete\nxfsdump: estimated dump size: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("144381568")]),s._v(" bytes\nxfsdump: /var/lib/xfsdump/inventory created\nxfsdump: creating dump session media "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("media "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nxfsdump: dumping ino map\nxfsdump: dumping directories\nxfsdump: dumping non-directory files\nxfsdump: ending media "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\nxfsdump: media "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" size "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("144048736")]),s._v(" bytes\nxfsdump: dump size "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("non-dir files"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("143807160")]),s._v(" bytes\nxfsdump: dump complete: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" seconds elapsed\nxfsdump: Dump Summary:\nxfsdump:   stream "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" /srv/boot.dump OK "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("success"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nxfsdump: Dump Status: SUCCESS\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果不在指令中增加 -L 和 -M 会进入互动模式，让你手动填写确认后才会开始备份")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll /srv/boot.dump ")]),s._v("\n-rw-r--r--. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("144048736")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" 03:03 /srv/boot.dump\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll /var/lib/xfsdump/inventory/")]),s._v("\n总用量 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("\n-rw-r--r--. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("312")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" 03:03 13d0663f-4cbd-412d-aa9f-975eb18da590.InvIndex\n-rw-r--r--. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5080")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" 03:03 6ad3d9fa-9c06-4968-9250-c1a70b5629ed.StObj\n-rw-r--r--. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("576")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" 03:03 fstab\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br")])]),t("h3",{attrs:{id:"用-xfsdump-进行增量备份（incremental-backups）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用-xfsdump-进行增量备份（incremental-backups）"}},[s._v("#")]),s._v(" 用 xfsdump 进行增量备份（Incremental backups）")]),s._v(" "),t("p",[s._v("增量是在全量的基础上，也就是至少有 level 0 ，才能够几区有其他的增量备份（1~9）")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 xfsdump 信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# xfsdump -I")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" system "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":\n        fs id:          13d0663f-4cbd-412d-aa9f-975eb18da590\n        session "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":\n                "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),s._v(" point:    study.centos.mrcode:/boot\n                device:         study.centos.mrcode:/dev/sda2\n                time:           Tue Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" 03:03:50 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("\n                session label:  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"boot_all"')]),s._v("\n                session id:     49ac1ac5-c63b-4778-9b87-f77f3b1d703a\n                level:          "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                resumed:        NO\n                subtree:        NO\n                streams:        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n                stream "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":\n                        pathname:       /srv/boot.dump\n                        start:          ino "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("69")]),s._v(" offset "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                        end:            ino "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1577745")]),s._v(" offset "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                        interrupted:    NO\n                        media files:    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n                        media "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":\n                                mfile index:    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                                mfile type:     data\n                                mfile size:     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("144048736")]),s._v("\n                                mfile start:    ino "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("69")]),s._v(" offset "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                                mfile end:      ino "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1577745")]),s._v(" offset "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                                media label:    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"boot_all"')]),s._v("\n                                media id:       da10035c-1c0b-4773-a56e-409a17fe9913\nxfsdump: Dump Status: SUCCESS\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以看到，有一个 level 0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下面先在 boot 中建立一个大约 10MB 的文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dd if=/dev/zero of=/boot/testing.img bs=1M count=10")]),s._v("\n记录了10+0 的读入\n记录了10+0 的写出\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10485760")]),s._v("字节"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" MB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("已复制，0.00396854 秒，2.6 GB/秒\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2. 建立差异备份，这里使用 -l 1 指定了 level 1 的被增量备份")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dd if=/dev/zero of=/boot/testing.img bs=1M count=10")]),s._v("\n记录了10+0 的读入\n记录了10+0 的写出\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10485760")]),s._v("字节"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" MB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("已复制，0.00396854 秒，2.6 GB/秒\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# xfsdump -l 1 -L boot_2 -M boot_2 -f /srv/boot.dump1 /boot")]),s._v("\nxfsdump: using "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" dump "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("drive_simple"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" strategy\nxfsdump: version "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),s._v(".7 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dump "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("format")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" - "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" ^C "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" status and control\nxfsdump: level "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" incremental dump of study.centos.mrcode:/boot based on level "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" dump begun Tue Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" 03:03:50 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("\nxfsdump: dump date: Tue Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" 03:11:00 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("\nxfsdump: session id: 8a8a1680-2a91-4292-943d-0d0a51fa2d67\nxfsdump: session label: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"boot_2"')]),s._v("\nxfsdump: ino map phase "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": constructing initial dump list\nxfsdump: ino map phase "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": pruning unneeded subtrees\nxfsdump: ino map phase "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(": skipping "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("only one dump stream"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nxfsdump: ino map construction complete\nxfsdump: estimated dump size: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10506880")]),s._v(" bytes\nxfsdump: creating dump session media "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("media "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nxfsdump: dumping ino map\nxfsdump: dumping directories\nxfsdump: dumping non-directory files\nxfsdump: ending media "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\nxfsdump: media "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" size "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10510952")]),s._v(" bytes\nxfsdump: dump size "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("non-dir files"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10488408")]),s._v(" bytes\nxfsdump: dump complete: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" seconds elapsed\nxfsdump: Dump Summary:\nxfsdump:   stream "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" /srv/boot.dump1 OK "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("success"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nxfsdump: Dump Status: SUCCESS\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -h /srv/boot*")]),s._v("\n-rw-r--r--. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root 138M "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" 03:03 /srv/boot.dump\n-rw-r--r--. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  11M "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" 03:11 /srv/boot.dump1\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3. 最后再观察下备份情况")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# xfsdump -I")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" system "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":\n        fs id:          13d0663f-4cbd-412d-aa9f-975eb18da590\n        session "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":\n                "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),s._v(" point:    study.centos.mrcode:/boot\n                device:         study.centos.mrcode:/dev/sda2\n                time:           Tue Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" 03:03:50 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("\n                session label:  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"boot_all"')]),s._v("\n                session id:     49ac1ac5-c63b-4778-9b87-f77f3b1d703a\n                level:          "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                resumed:        NO\n                subtree:        NO\n                streams:        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n                stream "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":\n                        pathname:       /srv/boot.dump\n                        start:          ino "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("69")]),s._v(" offset "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                        end:            ino "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1577745")]),s._v(" offset "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                        interrupted:    NO\n                        media files:    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n                        media "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":\n                                mfile index:    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                                mfile type:     data\n                                mfile size:     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("144048736")]),s._v("\n                                mfile start:    ino "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("69")]),s._v(" offset "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                                mfile end:      ino "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1577745")]),s._v(" offset "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                                media label:    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"boot_all"')]),s._v("\n                                media id:       da10035c-1c0b-4773-a56e-409a17fe9913\n        session "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":\n                "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),s._v(" point:    study.centos.mrcode:/boot\n                device:         study.centos.mrcode:/dev/sda2\n                time:           Tue Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" 03:11:00 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("\n                session label:  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"boot_2"')]),s._v("\n                session id:     8a8a1680-2a91-4292-943d-0d0a51fa2d67\n                level:          "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n                resumed:        NO\n                subtree:        NO\n                streams:        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n                stream "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":\n                        pathname:       /srv/boot.dump1\n                        start:          ino "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("113")]),s._v(" offset "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                        end:            ino "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("114")]),s._v(" offset "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                        interrupted:    NO\n                        media files:    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n                        media "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":\n                                mfile index:    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                                mfile type:     data\n                                mfile size:     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10510952")]),s._v("\n                                mfile start:    ino "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("113")]),s._v(" offset "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                                mfile end:      ino "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("114")]),s._v(" offset "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                                media label:    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"boot_2"')]),s._v("\n                                media id:       2c0d4e02-11cd-45a4-b131-8bc6505403fe\nxfsdump: Dump Status: SUCCESS\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以看到上面出现了 session 1 和 level 1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br"),t("span",{staticClass:"line-number"},[s._v("78")]),t("br"),t("span",{staticClass:"line-number"},[s._v("79")]),t("br"),t("span",{staticClass:"line-number"},[s._v("80")]),t("br"),t("span",{staticClass:"line-number"},[s._v("81")]),t("br"),t("span",{staticClass:"line-number"},[s._v("82")]),t("br"),t("span",{staticClass:"line-number"},[s._v("83")]),t("br"),t("span",{staticClass:"line-number"},[s._v("84")]),t("br"),t("span",{staticClass:"line-number"},[s._v("85")]),t("br"),t("span",{staticClass:"line-number"},[s._v("86")]),t("br"),t("span",{staticClass:"line-number"},[s._v("87")]),t("br"),t("span",{staticClass:"line-number"},[s._v("88")]),t("br"),t("span",{staticClass:"line-number"},[s._v("89")]),t("br"),t("span",{staticClass:"line-number"},[s._v("90")]),t("br"),t("span",{staticClass:"line-number"},[s._v("91")]),t("br"),t("span",{staticClass:"line-number"},[s._v("92")]),t("br"),t("span",{staticClass:"line-number"},[s._v("93")]),t("br"),t("span",{staticClass:"line-number"},[s._v("94")]),t("br"),t("span",{staticClass:"line-number"},[s._v("95")]),t("br"),t("span",{staticClass:"line-number"},[s._v("96")]),t("br"),t("span",{staticClass:"line-number"},[s._v("97")]),t("br"),t("span",{staticClass:"line-number"},[s._v("98")]),t("br"),t("span",{staticClass:"line-number"},[s._v("99")]),t("br"),t("span",{staticClass:"line-number"},[s._v("100")]),t("br"),t("span",{staticClass:"line-number"},[s._v("101")]),t("br"),t("span",{staticClass:"line-number"},[s._v("102")]),t("br"),t("span",{staticClass:"line-number"},[s._v("103")]),t("br"),t("span",{staticClass:"line-number"},[s._v("104")]),t("br"),t("span",{staticClass:"line-number"},[s._v("105")]),t("br"),t("span",{staticClass:"line-number"},[s._v("106")]),t("br"),t("span",{staticClass:"line-number"},[s._v("107")]),t("br"),t("span",{staticClass:"line-number"},[s._v("108")]),t("br"),t("span",{staticClass:"line-number"},[s._v("109")]),t("br"),t("span",{staticClass:"line-number"},[s._v("110")]),t("br"),t("span",{staticClass:"line-number"},[s._v("111")]),t("br"),t("span",{staticClass:"line-number"},[s._v("112")]),t("br"),t("span",{staticClass:"line-number"},[s._v("113")]),t("br"),t("span",{staticClass:"line-number"},[s._v("114")]),t("br"),t("span",{staticClass:"line-number"},[s._v("115")]),t("br"),t("span",{staticClass:"line-number"},[s._v("116")]),t("br"),t("span",{staticClass:"line-number"},[s._v("117")]),t("br"),t("span",{staticClass:"line-number"},[s._v("118")]),t("br"),t("span",{staticClass:"line-number"},[s._v("119")]),t("br"),t("span",{staticClass:"line-number"},[s._v("120")]),t("br"),t("span",{staticClass:"line-number"},[s._v("121")]),t("br"),t("span",{staticClass:"line-number"},[s._v("122")]),t("br"),t("span",{staticClass:"line-number"},[s._v("123")]),t("br"),t("span",{staticClass:"line-number"},[s._v("124")]),t("br")])]),t("h2",{attrs:{id:"xfs-文件系统还原-xfsrestore"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#xfs-文件系统还原-xfsrestore"}},[s._v("#")]),s._v(" XFS 文件系统还原 xfsrestore")]),s._v(" "),t("p",[s._v("备份文件就是在急用时可以还原系统的重要数据，用 xfsdump 备份的数据可以使用 xfsresotre 来还原")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("xfsrestore -I\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 观察备份文件资料")]),s._v("\nxfsrestore "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-f 备份文件名"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-L S_label"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 待复原的目录  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 单一文件全系统复原")]),s._v("\nxfsrestore "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-f 备份文件名"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" -r 待复原目录\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过增量备份文件复原系统")]),s._v("\nxfsrestore "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-f 备份文件名"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" -i 待复原目录\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入互动模式")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("选项与参数：")]),s._v(" "),t("ul",[t("li",[s._v("I：与 xfsdump 相同的输出")]),s._v(" "),t("li",[s._v("f：后面接的就是备份的文件，企业界可能会接 /dev/st0 等磁带机，我们这里接文件名")]),s._v(" "),t("li",[s._v("L：session 的 label name ，就是在 -I 输出中查询到的数据")]),s._v(" "),t("li",[s._v("s：需要接特定目录，复原某一个文件或目录的意思")]),s._v(" "),t("li",[s._v("r：如果是用文件来存储备份数据，这个选项就不需要使用。如果是一个磁带内有多个文件，需要这东西来达成增量复原")]),s._v(" "),t("li",[s._v("i：进入互动模式，进阶管理员使用的，一般我们不太需要操作它")])]),s._v(" "),t("h3",{attrs:{id:"用-xfsrestore-观察-xfsdump-后的备份数据内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用-xfsrestore-观察-xfsdump-后的备份数据内容"}},[s._v("#")]),s._v(" 用 xfsrestore 观察 xfsdump 后的备份数据内容")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# xfsrestore -I")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" system "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":\n        fs id:          13d0663f-4cbd-412d-aa9f-975eb18da590\n        session "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":\n                "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),s._v(" point:    study.centos.mrcode:/boot\n                device:         study.centos.mrcode:/dev/sda2\n                time:           Tue Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" 03:03:50 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("\n                session label:  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"boot_all"')]),s._v("\n                session id:     49ac1ac5-c63b-4778-9b87-f77f3b1d703a\n                level:          "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                resumed:        NO\n                subtree:        NO\n                streams:        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n                stream "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":\n                        pathname:       /srv/boot.dump\n                        start:          ino "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("69")]),s._v(" offset "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                        end:            ino "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1577745")]),s._v(" offset "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                        interrupted:    NO\n                        media files:    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n                        media "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":\n                                mfile index:    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                                mfile type:     data\n                                mfile size:     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("144048736")]),s._v("\n                                mfile start:    ino "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("69")]),s._v(" offset "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                                mfile end:      ino "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1577745")]),s._v(" offset "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                                media label:    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"boot_all"')]),s._v("\n                                media id:       da10035c-1c0b-4773-a56e-409a17fe9913\n        session "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":\n\t\t\t\t\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),s._v(" point:    study.centos.mrcode:/boot\n                device:         study.centos.mrcode:/dev/sda2\n                time:           Tue Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" 03:11:00 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("\n                session label:  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"boot_2"')]),s._v("\n                session id:     8a8a1680-2a91-4292-943d-0d0a51fa2d67\n                level:          "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n                resumed:        NO\n                subtree:        NO\n                streams:        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n                stream "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":\n                        pathname:       /srv/boot.dump1\n                        start:          ino "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("113")]),s._v(" offset "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                        end:            ino "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("114")]),s._v(" offset "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                        interrupted:    NO\n                        media files:    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n                        media "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":\n                                mfile index:    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                                mfile type:     data\n                                mfile size:     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10510952")]),s._v("\n                                mfile start:    ino "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("113")]),s._v(" offset "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                                mfile end:      ino "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("114")]),s._v(" offset "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n                                media label:    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"boot_2"')]),s._v("\n                                media id:       2c0d4e02-11cd-45a4-b131-8bc6505403fe\nxfsrestore: Restore Status: SUCCESS\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 和前面输出的一样")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里重点是看到这个文件系统是 /boot 挂载点，有两个备份 level 0 和 level 1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以看到这两个备份文件的大小，更重要的是 session label")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br")])]),t("h3",{attrs:{id:"简单复原-level-0-的文件系统"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#简单复原-level-0-的文件系统"}},[s._v("#")]),s._v(" 简单复原 level 0 的文件系统")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1. 直接将数据覆盖回去即可")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里使用了 -L 就是那个 session label")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# xfsrestore -f /srv/boot.dump -L boot_all /boot")]),s._v("\nxfsrestore: using "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" dump "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("drive_simple"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" strategy\nxfsrestore: version "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),s._v(".7 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dump "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("format")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" - "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" ^C "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" status and control\nxfsrestore: using online session inventory\nxfsrestore: searching media "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" directory dump\nxfsrestore: examining media "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nxfsrestore: reading directories\nxfsrestore: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" directories and "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("337")]),s._v(" entries processed\nxfsrestore: directory post-processing\nxfsrestore: restoring non-directory files\nxfsrestore: restore complete: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" seconds elapsed\nxfsrestore: Restore Summary:\nxfsrestore:   stream "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" /srv/boot.dump OK "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("success"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nxfsrestore: Restore Status: SUCCESS\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2. 将备份资料在 /tmp/boot 下解开")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir /tmp/boot")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# xfsrestore -f /srv/boot.dump -L boot_all /tmp/boot/")]),s._v("\nxfsrestore: using "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" dump "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("drive_simple"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" strategy\nxfsrestore: version "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),s._v(".7 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dump "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("format")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" - "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" ^C "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" status and control\nxfsrestore: using online session inventory\nxfsrestore: searching media "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" directory dump\nxfsrestore: examining media "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nxfsrestore: reading directories\nxfsrestore: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" directories and "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("337")]),s._v(" entries processed\nxfsrestore: directory post-processing\nxfsrestore: restoring non-directory files\nxfsrestore: restore complete: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" seconds elapsed\nxfsrestore: Restore Summary:\nxfsrestore:   stream "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" /srv/boot.dump OK "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("success"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nxfsrestore: Restore Status: SUCCESS\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 看到两个大小不一致")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# du -sm /boot/ /tmp/boot/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("148")]),s._v("     /boot/\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("138")]),s._v("     /tmp/boot/\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 对比下发现 /boot 下多了一个 testing.img")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# diff -r /boot/ /tmp/boot/")]),s._v("\n只在 /boot/ 存在：testing.img\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br")])]),t("p",[s._v("这里注意了，笔者以为这样复原之后，会完全还原到复原之前的内容的，这里的规则是："),t("strong",[s._v("同名的文件被覆盖，其他系统内的新的问价会被保留")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3. 仅复原备份档内的 grub2 到 /tmp/boot2 里面去")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir /tmp/boot2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# xfsrestore -f /srv/boot.dump -L boot_all -s grub2 /tmp/boot2")]),s._v("\nxfsrestore: using "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" dump "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("drive_simple"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" strategy\nxfsrestore: version "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),s._v(".7 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dump "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("format")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" - "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" ^C "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" status and control\nxfsrestore: using online session inventory\nxfsrestore: searching media "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" directory dump\nxfsrestore: examining media "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nxfsrestore: reading directories\nxfsrestore: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" directories and "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("337")]),s._v(" entries processed\nxfsrestore: directory post-processing\nxfsrestore: restoring non-directory files\nxfsrestore: restore complete: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" seconds elapsed\nxfsrestore: Restore Summary:\nxfsrestore:   stream "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" /srv/boot.dump OK "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("success"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nxfsrestore: Restore Status: SUCCESS\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -h /tmp/boot2/")]),s._v("\n总用量 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ndrwx------. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("97")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":32 grub2\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("h2",{attrs:{id:"复原增量备份资料"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#复原增量备份资料"}},[s._v("#")]),s._v(" 复原增量备份资料")]),s._v(" "),t("p",[s._v("增量还原有顺序，比如由 level 0 -> level1 -> level2 那么还原的时候，也需要按照这个顺序")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# xfsrestore -f /srv/boot.dump1 /tmp/boot")]),s._v("\nxfsrestore: using "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" dump "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("drive_simple"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" strategy\nxfsrestore: version "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),s._v(".7 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dump "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("format")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" - "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" ^C "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" status and control\nxfsrestore: searching media "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" dump\nxfsrestore: examining media "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nxfsrestore: dump description: \nxfsrestore: hostname: study.centos.mrcode\nxfsrestore: "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),s._v(" point: /boot\nxfsrestore: volume: /dev/sda2\nxfsrestore: session time: Tue Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" 03:11:00 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("\nxfsrestore: level: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nxfsrestore: session label: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"boot_2"')]),s._v("\nxfsrestore: media label: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"boot_2"')]),s._v("\nxfsrestore: "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" system id: 13d0663f-4cbd-412d-aa9f-975eb18da590\nxfsrestore: session id: 8a8a1680-2a91-4292-943d-0d0a51fa2d67\nxfsrestore: media id: 2c0d4e02-11cd-45a4-b131-8bc6505403fe\nxfsrestore: using online session inventory\nxfsrestore: searching media "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" directory dump\nxfsrestore: reading directories\nxfsrestore: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" directories and "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" entries processed\nxfsrestore: directory post-processing\nxfsrestore: restoring non-directory files\nxfsrestore: restore complete: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" seconds elapsed\nxfsrestore: Restore Summary:\nxfsrestore:   stream "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" /srv/boot.dump1 OK "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("success"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nxfsrestore: Restore Status: SUCCESS\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br")])]),t("h3",{attrs:{id:"仅还原部分文件的-xfsrestore-互动模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#仅还原部分文件的-xfsrestore-互动模式"}},[s._v("#")]),s._v(" 仅还原部分文件的 xfsrestore 互动模式")]),s._v(" "),t("p",[s._v("使用 -s 参数可以接部分数据来还原，当文件太多时，又不知道里面有哪些文件，可以使用互动模式，比如想要知道 level0 的备份数据里面有哪些东西")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# xfsrestore -f /srv/boot.dump -i /tmp/boot3")]),s._v("\nxfsrestore: using "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" dump "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("drive_simple"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" strategy\nxfsrestore: version "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),s._v(".7 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dump "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("format")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" - "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" ^C "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" status and control\nxfsrestore: searching media "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" dump\nxfsrestore: examining media "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nxfsrestore: dump description: \nxfsrestore: hostname: study.centos.mrcode\nxfsrestore: "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),s._v(" point: /boot\nxfsrestore: volume: /dev/sda2\nxfsrestore: session time: Tue Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" 03:03:50 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("\nxfsrestore: level: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nxfsrestore: session label: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"boot_all"')]),s._v("\nxfsrestore: media label: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"boot_all"')]),s._v("\nxfsrestore: "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" system id: 13d0663f-4cbd-412d-aa9f-975eb18da590\nxfsrestore: session id: 49ac1ac5-c63b-4778-9b87-f77f3b1d703a\nxfsrestore: media id: da10035c-1c0b-4773-a56e-409a17fe9913\nxfsrestore: using online session inventory\nxfsrestore: searching media "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" directory dump\nxfsrestore: reading directories\nxfsrestore: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" directories and "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("337")]),s._v(" entries processed\nxfsrestore: directory post-processing\n\n "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" subtree selection dialog "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("\n\nthe following commands are available:\n        "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),s._v(" \n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以加入还原文件列表中")]),s._v("\n        delete "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从还原列表中删除文件，不是删除，只是从列表中移出去")]),s._v("\n        extract \t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开始还原动作")]),s._v("\n        quit \n        "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v(" \n\n-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls 查看有哪些文档")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("75")]),s._v(" initramfs-3.10.0-1062.el7.x86_64.img \n              "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("77")]),s._v(" vmlinuz-0-rescue-f228ab37c368416c84c6b27971ba45a9 \n              "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("76")]),s._v(" initramfs-0-rescue-f228ab37c368416c84c6b27971ba45a9.img \n              "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("74")]),s._v(" vmlinuz-3.10.0-1062.el7.x86_64 \n              "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("73")]),s._v(" symvers-3.10.0-1062.el7.x86_64.gz \n              "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("72")]),s._v(" config-3.10.0-1062.el7.x86_64 \n              "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("71")]),s._v(" System.map-3.10.0-1062.el7.x86_64 \n              "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("70")]),s._v(" .vmlinuz-3.10.0-1062.el7.x86_64.hmac \n              "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("68")]),s._v(" grub/\n         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1572928")]),s._v(" grub2/\n              "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("67")]),s._v(" efi/\n\n -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" grub/\n\n -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" grub2/\n\n -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" config-3.10.0-229.el7.x86_64\nconfig-3.10.0-229.el7.x86_64 not found\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这个里面不能按退格键，我输出了，不过提示未找到")]),s._v("\n\n -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" extract\n --------------------------------- end dialog ---------------------------------\n\nxfsrestore: restoring non-directory files\nxfsrestore: restore complete: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("182")]),s._v(" seconds elapsed\nxfsrestore: Restore Summary:\nxfsrestore:   stream "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" /srv/boot.dump OK "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("success"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nxfsrestore: Restore Status: SUCCESS\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看还原的目录下，的确只有我们需要的两个")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -l /tmp/boot3")]),s._v("\n总用量 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ndrwxr-xr-x. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":22 grub\ndrwx------. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("97")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("月  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":32 grub2\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br")])])])}),[],!1,null,null,null);n.default=e.exports}}]);