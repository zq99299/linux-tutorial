(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{510:function(s,t,a){s.exports=a.p+"assets/img/image-20200402103104786.a9fa6995.png"},511:function(s,t,a){s.exports=a.p+"assets/img/image-20200403131250864.a71b53ad.png"},512:function(s,t,a){s.exports=a.p+"assets/img/image-20200403132310377.6e469cdc.png"},513:function(s,t,a){s.exports=a.p+"assets/img/image-20200403132610040.6737d05e.png"},514:function(s,t,a){s.exports=a.p+"assets/img/image-20200403133234683.1d20d045.png"},515:function(s,t,a){s.exports=a.p+"assets/img/image-20200403133531975.b59289a3.png"},668:function(s,t,a){"use strict";a.r(t);var n=a(16),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"系统基本设置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#系统基本设置"}},[s._v("#")]),s._v(" 系统基本设置")]),s._v(" "),n("p",[s._v("CentOS 7 系统其实有许多东西需要来设置，包括之前谈到过的语系、日期、时间、网络等。以前有一个 setup 的软件将许多的设置做成图形界面，连防火墙都可以搞定，不过在 7.x 推出了 bash-complete 的功能，配合很多软件的指令下达设置，就还比较方便的")]),s._v(" "),n("h2",{attrs:{id:"网络设置（手动设置与-dhcp-自动获取）"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#网络设置（手动设置与-dhcp-自动获取）"}},[s._v("#")]),s._v(" 网络设置（手动设置与 DHCP 自动获取）")]),s._v(" "),n("p",[s._v("网络其实是很复杂的，要设置网络服务器，需要先了解  "),n("a",{attrs:{href:"http://linux.vbird.org/linux_server/0110network_basic.php",target:"_blank",rel:"noopener noreferrer"}},[s._v("网络基础"),n("OutboundLink")],1),s._v(" ，因为没有人愿意自己的服务器老是被攻击或则是网络问题层出不穷")]),s._v(" "),n("p",[s._v("本章仅介绍一部单机 LInux 客户端，并非服务器，所以你需要的各项网络参数，只需要找到网络管理员或则是找到你的 ISP（Internet Service Provider），询问到网络参数的获取方式或实际的网络参数即可；通常网络参数的获取方式有如下几种：")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("手动设置固定 IP")]),s._v(" "),n("p",[s._v("常用于学术网络的服务器、公司内特定工位，此种方式必须取得如下几个网络参数：")]),s._v(" "),n("ul",[n("li",[s._v("IP")]),s._v(" "),n("li",[s._v("子网掩码（netmask）")]),s._v(" "),n("li",[s._v("网关（gateway）")]),s._v(" "),n("li",[s._v("DNS：在百度搜下公用的 DNS 就知道了")])])]),s._v(" "),n("li",[n("p",[s._v("网络参数可自动取得（dhcp 协议自动获取）")]),s._v(" "),n("p",[s._v("常见于 IP 分享器后端的主机，或则是利用在线网？（cable modem），或则是学校宿舍的网络环境等。此种网络参数获取方式就被称为 dhcp，只需要设置上网方式为 dhcp 即可")])]),s._v(" "),n("li",[n("p",[s._v("ASDL 宽带拨号")]),s._v(" "),n("p",[s._v("无论你的 IP 是固定的还是每次拨号都不相同（被称为浮动式 IP），只要通过光钎或宽带调制解调器拨号上网的，就是使用这种方式。拨号上网虽然还是使用网卡链接到调制调节器上，不过，系统最终会产生一个替代调制调节器的网络接口（ppp0，一个实体网络接口）")]),s._v(" "),n("p",[s._v("这种方式，找你的移动运营商就可以了")])])]),s._v(" "),n("p",[s._v("获得网络参数后，还需要知道通过什么硬件连上 Internet？其实就是网卡。目前的驻留网卡使用以太网络协议所开发出来的以太网卡（Ethernet），因此在 Linux 上这种网卡接口为 ethN（N 为数值）。比如我的测试机上有一张以太网卡，因此这主机的网络接口是 eth0（第一张卡为 0 开始）")]),s._v(" "),n("p",[s._v("不过新的 CentOS 7 开始对网卡的编号有另一套规则，网卡的接口代号与网卡的来源有关，基本上的网卡名称会是这样分类：")]),s._v(" "),n("ul",[n("li",[s._v("eno1：代表由主板 BISO 内置网卡")]),s._v(" "),n("li",[s._v("ens1：代表由主板 BIOS 内置的 PCI-E 接口的网卡")]),s._v(" "),n("li",[s._v("enp2s0：代表 PCI-E 接口的独立网卡，可能有多个插孔，因此会有s0、s1.... 等编号")]),s._v(" "),n("li",[s._v("eth0：如果上述名称都不适用，则回到原本的预设网卡编号")])]),s._v(" "),n("p",[s._v("可以通过 "),n("code",[s._v("ifconfig -a")]),s._v(" 列出你主机上的所有网卡，另外 CentOS 7 不建议直接手动修改配置文件，而是通过 nmcli 指令来设置网络参数")]),s._v(" "),n("h3",{attrs:{id:"手动设置-ip-网络参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#手动设置-ip-网络参数"}},[s._v("#")]),s._v(" 手动设置 IP 网络参数")]),s._v(" "),n("p",[s._v("如果你已经获取到网络参数，基本上的网络参数需要这些数据")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("method: manual # 手动设置\nIP: 172.16.1.1\nnetmask: 255.255.0.0\ngateway: 172.16.200.254\nDNS: 172.162.200.254\nhostname: study.centos.mrcode  # 暂时不用理会\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("cmcli 是通过一个名为「联机代号」的名称来设置是否要上网，每个「联机代号」会有一个「网卡号」，这两个通常设置为相同值")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("nmcli connection show "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("网卡代号"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询系统上的联机代号")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nmcli connection show")]),s._v("\nNAME    UUID                                  TYPE      DEVICE\nenp0s3  402f740a-d5a9-4a18-8837-21df7c6771fa  ethernet  enp0s3\nvirbr0  e2eb3b9d-bbc2-4b8d-b73a-94183164cc47  bridge    virbr0\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# NAME 联机代号、通常与后面的网卡 DEVICE 一样")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# UUID：特殊设备识别号")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# TYPE：网卡类型，通常是以太网卡")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# DEVICE：网卡名称")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从上面知道我们其实有两个网卡代号。可以查询这个联机代号的设置数据")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nmcli connection show enp0s3")]),s._v("\nconnection.id:                          enp0s3\nconnection.uuid:                        402f740a-d5a9-4a18-8837-21df7c6771fa\nconnection.stable-id:                   --\nconnection.type:                        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("802")]),s._v("-3-ethernet\nconnection.interface-name:              enp0s3\nconnection.autoconnect:                 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nipv4.method:                            manual\nipv4.dns:                               --\nipv4.dns-search:                        --\nipv4.dns-options:                       "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\nipv4.dns-priority:                      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nipv4.addresses:                         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".4.223/24\nipv4.gateway:                           --\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nIP4.ADDRESS"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(":                         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".4.223/24\nIP4.GATEWAY:                            --\nIP4.ROUTE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(":                           dst "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".4.0/24, nh "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0, mt "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\nIP6.ADDRESS"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(":                         fe80::3513:3436:21d:f327/64\nIP6.GATEWAY:                            --\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br")])]),n("p",[s._v("上面信息大写的 IP4、IP6 是目前的实际使用的网络参数，最上面的 connection 部分则是联机的状态，比较重要的参数含义如下：")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("connection.autoconnect [yes|no]")]),s._v("：是否开机时启动这个联机，通常预设为 yes")]),s._v(" "),n("li",[n("code",[s._v("ipv4.method [auto|manual]")]),s._v("：自动还是手动设置网络参数")]),s._v(" "),n("li",[n("code",[s._v("ipv4.dns")]),s._v("：DNS IP 地址")]),s._v(" "),n("li",[n("code",[s._v("ipv4.addresses [IP/Netmask]")]),s._v("： IP 与 netmask 的集合")]),s._v(" "),n("li",[n("code",[s._v("ipv4.gateway")]),s._v("： gateway 的 IP 地址")])]),s._v(" "),n("p",[s._v("根据上面的设置项目，将我们的网络参数设置好")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nmcli connection modify enp0s3 \\")]),s._v("\nconnection.autoconnect "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\nipv4.method manual "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\nipv4.addresses "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".110.10/24 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\nipv4.gateway "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".110.1\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ipv4.dns 8.8.8.8")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 上面只是修改了配置文件，还需实际生效才可以")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nmcli connection up enp0s3")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nmcli connection show enp0s3")]),s._v("\nIP4.ADDRESS"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(":                         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".110.10/24\nIP4.GATEWAY:                            "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".110.1\nIP4.ROUTE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(":                           dst "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".111.0/24, nh "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0, mt "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[s._v("笔者是虚拟机，使用 "),n("a",{attrs:{href:"https://zq99299.github.io/note-book/_posts/virtualbox/#%E7%BD%91%E7%BB%9C%E7%AF%87-host-only%EF%BC%88win10%EF%BC%89",target:"_blank",rel:"noopener noreferrer"}},[s._v("Host Only 方式与主机共享外网"),n("OutboundLink")],1),s._v(" ，上面获取到的网络参数也是从这个网络管理器里面设置的。这样就可以让你的虚拟机上网了")]),s._v(" "),n("h3",{attrs:{id:"自动获取-ip-参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自动获取-ip-参数"}},[s._v("#")]),s._v(" 自动获取 IP 参数")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nmcli connection modify enp0s3 \\")]),s._v("\nconnection.autoconnect "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\nipv4.method auto\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nmcli connection up enp0s3")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nmcli connection show enp0s3")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("自动的就是使用了 dhcp 服务获取的参数配置")]),s._v(" "),n("h3",{attrs:{id:"修改主机名"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#修改主机名"}},[s._v("#")]),s._v(" 修改主机名")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("hostnamectl "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("set-hostname 你的主机名"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1. 显示当前的主机名")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hostnamectl")]),s._v("\n   Static hostname: study.centos.mrcode\t\t\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 主机名")]),s._v("\n         Icon name: computer-vm\n           Chassis: vm\n        Machine ID: e4a1acbeffac4762b2c9ed13daf9a493\n           Boot ID: da0fdf95ea7f43e69ba5fd4d33c1a1b3\n    Virtualization: kvm\n  Operating System: CentOS Linux "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Core"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\t\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 操作系统名称")]),s._v("\n       CPE OS Name: cpe:/o:centos:centos:7\n            Kernel: Linux "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.10")]),s._v(".0-1062.el7.x86_64\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 核心版本")]),s._v("\n      Architecture: x86-64\t\t\t\t\t\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 硬件版本")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2. 尝试修改主机名为 www.centos.mrcode ，之后再修改回来")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hostnamectl set-hostname www.centos.mrcode")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/hostname")]),s._v("\nwww.centos.mrcode\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hostnamectl set-hostname study.centos.mrcode")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("h2",{attrs:{id:"日期与时间设置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#日期与时间设置"}},[s._v("#")]),s._v(" 日期与时间设置")]),s._v(" "),n("p",[s._v("第 4 章中的 date 指令，可以进行日期、时间的设置。不过怎么修改时区呢？下次开机还会是正确的时间吗？如果有网络的话，如何进行网络校时")]),s._v(" "),n("h3",{attrs:{id:"时区的显示与设置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#时区的显示与设置"}},[s._v("#")]),s._v(" 时区的显示与设置")]),s._v(" "),n("p",[s._v("因为地球是圆的，每个时刻每个地区的时间可能都不一样。为了统治时间，有个 GMT 格林威治时间（时区）")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("timedatectl "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("commamd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n选项与参数：\n\tlist-timezones：列出系统上所有支持的时区名称\n\tset-timezone：设置时区\n\tset-time：设置时间\n\tset-ntp：设置网络校时系统\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1. 显示目前的时区与时间等信息")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# timedatectl")]),s._v("\n      Local time: Wed "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-04-01 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":32:12 CST\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 本地时间")]),s._v("\n  Universal time: Wed "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-04-01 09:32:12 UTC\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# URC 时间，可称为格林威治时间")]),s._v("\n        RTC time: Wed "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-04-01 09:32:12\n       Time zone: Asia/Shanghai "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CST, +0800"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 时区")]),s._v("\n     NTP enabled: no\nNTP synchronized: no\n RTC "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v(" TZ: no\n      DST active: n/a\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2. 显示出是否有 New_York 时区，若有，则将目前的时区更新")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# timedatectl list-timezones | grep -i new")]),s._v("\nAmerica/New_York\nAmerica/North_Dakota/New_Salem\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# timedatectl set-timezone America/New_York")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# timedatectl")]),s._v("\n      Local time: Wed "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-04-01 05:35:41 EDT\n  Universal time: Wed "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-04-01 09:35:41 UTC\n        RTC time: Wed "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-04-01 09:35:41\n       Time zone: America/New_York "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("EDT, -0400"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n     NTP enabled: no\nNTP synchronized: no\n RTC "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v(" TZ: no\n      DST active: "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n Last DST change: DST began at\n                  Sun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-03-08 01:59:59 EST\n                  Sun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-03-08 03:00:00 EDT\n Next DST change: DST ends "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("the clock jumps one hour backwards"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" at\n                  Sun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-11-01 01:59:59 EDT\n                  Sun "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-11-01 01:00:00 EST\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# timedatectl set-timezone Asia/Shanghai")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br")])]),n("h3",{attrs:{id:"时间调整"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#时间调整"}},[s._v("#")]),s._v(" 时间调整")]),s._v(" "),n("p",[s._v("调整时间的格式可以是 "),n("code",[s._v("yyyy-mm-dd HH:MM")]),s._v(" 格式")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将时间调整到正确的时间上")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# timedatectl set-time "2020-04-01 17:38"')]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("以前使用 date 去修改日期后，还需要使用 hwclock 去修改 BIOS 记录的时间，现在通过该指令就简单多了")]),s._v(" "),n("h3",{attrs:{id:"用-ntpdate-手动网络校时"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#用-ntpdate-手动网络校时"}},[s._v("#")]),s._v(" 用 ntpdate 手动网络校时")]),s._v(" "),n("p",[s._v("使用系统默认的自动校时功能，会启动 NTP 协议相关的软件，会多开好几个 port，所以有些人也喜欢吧校正指令写入 crontab 中")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ntpdate tock.stdtime.gov.tw")]),s._v("\n "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" Apr "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":42:48 ntpdate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2754")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": step "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" server "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("211.22")]),s._v(".103.157 offset "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.937308")]),s._v(" sec\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将时间刷入 BIOS")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hwclock -w")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("上述 "),n("code",[s._v("tock.stdtime.gov.tw")]),s._v(" 是某一个 NTP 服务器提供的服务，也可以百度下目前常用的 NTP 服务器地址")]),s._v(" "),n("h3",{attrs:{id:"语系设置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#语系设置"}},[s._v("#")]),s._v(" 语系设置")]),s._v(" "),n("p",[s._v("在第 4 章中讲到过 LANG 与 locale 指令能够查询目前的语系数据与变量，也知道 "),n("code",[s._v("/etc/locale.conf")]),s._v(" 其实就是语系的配置文件。")]),s._v(" "),n("p",[s._v("另外，系统的语系与你目前软件的语系数据可能是不一样的。还可以使用 localectl 来查询系统语系")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# localectl")]),s._v("\n   System Locale: "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("LANG")])]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("zh_CN.UTF-8\t\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 语系系统")]),s._v("\n       VC Keymap: cn\n      X11 Layout: cn\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# locale")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("LANG")])]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("zh_CN.UTF-8\t\t\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下面的规则则是当前这个软件的语系数据")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LC_CTYPE")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zh_CN.UTF-8"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("LC_NUMERIC")])]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zh_CN.UTF-8"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("LC_TIME")])]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zh_CN.UTF-8"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LC_COLLATE")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zh_CN.UTF-8"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("LC_MONETARY")])]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zh_CN.UTF-8"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LC_MESSAGES")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zh_CN.UTF-8"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("LC_PAPER")])]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zh_CN.UTF-8"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("LC_NAME")])]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zh_CN.UTF-8"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("LC_ADDRESS")])]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zh_CN.UTF-8"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("LC_TELEPHONE")])]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zh_CN.UTF-8"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("LC_MEASUREMENT")])]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zh_CN.UTF-8"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("LC_IDENTIFICATION")])]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zh_CN.UTF-8"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("LC_ALL")])]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("p",[s._v("可以看到，一个是系统的语系，一个是当前这个 bash 的语系，可以通过如下方式修改系统语系")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# localectl set-locale LANG=en_US.utf8")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 之前讲过的这个是切换到文本模式")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl isolate multi-user.target")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl isolate graphical.target")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里需要注意的是：虽然有时候看到的语言是 zh_CN.UTF-8，但是其实后面是没有斜杠的")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 比如这里要换成中文的，那么就要设置成 zh_CN.utf8  才可以，不然看着设置成功了，但是图形界面还是英文的")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("重启后，从感官上在终端模式你可能感受不到什么变化，但是你进入图形化界面，就会发现整个环境都变成英文的了")]),s._v(" "),n("h2",{attrs:{id:"防火墙简易设置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#防火墙简易设置"}},[s._v("#")]),s._v(" 防火墙简易设置")]),s._v(" "),n("p",[s._v("有网络没有防火墙是有点危险")]),s._v(" "),n("p",[s._v("防火墙其实是一种网络数据的过滤方式，它可以根据服务器启动的服务来设置是否放行，也能够针对你信任的用户来放行。这部分应该要对网络有点概念之后才来讨论比较好，所以详细的数据会写在服务器篇的内容。")]),s._v(" "),n("p",[s._v("目前 CentOS 7 的预设防火墙机制为 firewalld，它的管理主要是通过  firewall-cmd 指令，但是目前我们没有学习更多的防火墙与网络规则，想要了解 firewall-cmd 有点难，所以本小节仅适用图形界面来介绍防火墙的相关数据")]),s._v(" "),n("p",[n("img",{attrs:{src:a(510),alt:"image-20200402103104786"}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(511),alt:"image-20200403131250864"}})]),s._v(" "),n("ul",[n("li",[n("p",[s._v("配置：「运行时」与「永久」的差异")]),s._v(" "),n("p",[s._v("基本上防火墙的规则大概有两种情况，暂时用来执行的规则与永久记录的规则。一般来说，刚刚启动防火墙时，这两种规则会一模一样。如果在运行时中你加上了几条规则测试后，没有写入永久记录里面的话，那么下次重新启动防火墙时，该规则就会消失")])]),s._v(" "),n("li",[n("p",[s._v("区域：根据不同的环境所设计的网络区域")]),s._v(" "),n("p",[s._v("玩过网络后，你可能会听说过所谓的本机网络、NAT 与 DMZ 等网域，同时可能还有可信任的（trusted）网域，或则是应该被抵挡（drop/block）的网域等等。这些网域各有特点，早期的 iptables 防火墙服务，所有的规则都需要你自己手动来编写，然后规则的细分需要自己去规划，所以很可能会导致一堆无法理解的规则")]),s._v(" "),n("p",[s._v("新的 firewalld 服务就预先设计这些可能会被用到的网络环境，里面的规则除了 public（公开网域）外，其他的区域则暂时为没有启动的状态")]),s._v(" "),n("p",[s._v("在本章只需要考虑 public 这个区域即可，其他的等你学习了服务器篇再讨论")])]),s._v(" "),n("li",[n("p",[s._v("相关设置项目")]),s._v(" "),n("p",[s._v("防火墙规则通常需要设置的地方有：")]),s._v(" "),n("ul",[n("li",[s._v("服务：一般来说，如果是作为 internet 的服务器，提供的是比较一般的服务，只需要处理该项即可。默认你的服务器已经提供了 ssh 与 dhcpv6-client 的服务端口")]),s._v(" "),n("li",[s._v("端口：如果你提供的服务所启用的端口并不是正规的端口，比如为了玩 systemd 与 SELinux，我们曾经将 ssh 的端口调整到 222，那么如果你想过要让人家连进来，除了「服务」外，还需要对「端口调整」。另外如果某些比较特别的服务时 CentOS 预设没有提供的，所以在 「服务」中也是不存在的，这时可以直接通过端口来搞定")]),s._v(" "),n("li",[s._v("富规则：如果你有整个网域需要放行或者是拒绝的时候，那么前两个项目就无法适用了。")]),s._v(" "),n("li",[s._v("接口：该区域针对哪一个网卡来做限制。")])]),s._v(" "),n("p",[s._v("至于伪装、端口转发、ICMP 过滤器、来源等这里不介绍，这属于网络的概念知识，基础篇不讲解。")])])]),s._v(" "),n("p",[s._v("下面进行练习示例：")]),s._v(" "),n("ul",[n("li",[s._v("要作为 ssh、www、ftp、https 等正规端口的服务")]),s._v(" "),n("li",[s._v("同时与前几章搭配，需要放行 port 222 与 port 555")]),s._v(" "),n("li",[s._v("局域网络 192.168.1.0/24 这一段想要直接放行这段网域对我们服务器的联机")])]),s._v(" "),n("p",[s._v("以上需求需要怎么配置？因为需要永久生效，所以需要在永久里面去修改才行，同时因为永久设置比较重要，在进入时需要先进行授权（弹框让你输入密码）")]),s._v(" "),n("p",[n("img",{attrs:{src:a(512),alt:"image-20200403132310377"}})]),s._v(" "),n("p",[s._v("勾选上 ftp、http、https、ssh，勾选即生效了")]),s._v(" "),n("p",[s._v("下面进行端口的配置")]),s._v(" "),n("p",[n("img",{attrs:{src:a(513),alt:"image-20200403132610040"}})]),s._v(" "),n("p",[s._v("添加上 222 与 555 端口。")]),s._v(" "),n("p",[s._v("下面开始处理局域网络的放行，由于书上说是在富规则里面配置的，但是这个 UI 配置有点问题？所以使用命令来配置的")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# firewall-cmd --permanent --add-rich-rule=\'rule family="ipv4" source address="192.168.1.0/24" accept\'')]),s._v("\nsuccess\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# firewall-cmd --reload")]),s._v("\nsuccess\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("使用命令之后，在界面上出现了配置，如下\n"),n("img",{attrs:{src:a(514),alt:"image-20200403133234683"}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(515),alt:"image-20200403133531975"}})])])}),[],!1,null,null,null);t.default=e.exports}}]);