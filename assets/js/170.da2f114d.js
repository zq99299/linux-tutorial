(window.webpackJsonp=window.webpackJsonp||[]).push([[170],{527:function(s,t,a){"use strict";a.r(t);var n=a(16),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"rpm-软件管理程序：rpm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rpm-软件管理程序：rpm"}},[s._v("#")]),s._v(" RPM 软件管理程序：rpm")]),s._v(" "),a("h2",{attrs:{id:"rpm-默认安装的路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rpm-默认安装的路径"}},[s._v("#")]),s._v(" RPM 默认安装的路径")]),s._v(" "),a("p",[s._v("一般来说，RPM 类型的文件在安装的时候，会先读取文件内记载的设置参数内容，然后将该数据用来对比 Linux 系统的环境，找出未安装的依赖软件。")]),s._v(" "),a("p",[s._v("若环境检查合格了，则开始安装。安装完成后，该软件相关的信息会被写入到 "),a("code",[s._v("/var/lib/rpm/")]),s._v(" 目录下的数据库文件中。")]),s._v(" "),a("p",[s._v("这个数据库的数据很重要，因为未来如果我们有任何软件的升级需求，版本之间的比较就是来自这个数据库，想查询已安装的软件信息也是来自于该数据库，同时，目前的 RPM 也提供数字签名信息，也是记录在此")]),s._v(" "),a("p",[s._v("那么软件内的文件放置到哪里的？这个与文件系统有关，在第 5 章的目录配置谈过每个目录的含义，这里再次强调：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("/etc/")]),s._v("：一些配置文件")]),s._v(" "),a("li",[a("code",[s._v("/usr/bin/")]),s._v("：一些可执行文件")]),s._v(" "),a("li",[a("code",[s._v("/usr/lib/")]),s._v("：一些程序使用的动态函数库")]),s._v(" "),a("li",[a("code",[s._v("/usr/share/doc/")]),s._v("：一些基本的软件使用手册与说明文件")]),s._v(" "),a("li",[a("code",[s._v("/usr/share/man/")]),s._v("：一些 man page 文件")])]),s._v(" "),a("h2",{attrs:{id:"rpm-安装（install）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rpm-安装（install）"}},[s._v("#")]),s._v(" RPM 安装（install）")]),s._v(" "),a("p",[s._v("因为软件安装时 root 的工作，因此需要有 root 身份才可以使用 rpm 指令")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -ivh package_name\n\n-i：install\n-v：查看更详细的安装信息画面\n-h：以安装信息列显示安装进度\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 范例 1：安装原版光盘上的 rp-pppoe 软件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -ivh /mnt/Packages/rp-pppoe-3.11-7.el7.x86_64.rpm ")]),s._v("\nPreparing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".                          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################# [100%]")]),s._v("\nUpdating / installing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":rp-pppoe-3.11-7.el7              "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################# [100%]")]),s._v("\n   \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 范例 2：一次性安装两个以上的软件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -ivh a.i386.rpm b.i386.rpm *.rpm\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 后面可以接上许多的软件")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 范例 3：直接有网络上面的某个文件安装")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -ivh http://website.name/path/pkgname.rpm\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("另外，如果在安装过程中发现问题，或已经知道会发生问题，还是要强制安装，可以参考以下说明，下面列出 rpm 安装时常用的选项与参数说明：")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("--nodeps")])]),s._v(" "),a("ul",[a("li",[s._v("使用时机：当发生软件属性依赖问题而无法安装时，但你想强制安装时")]),s._v(" "),a("li",[s._v("危险性：如果不考虑依赖问题，可能导致软件无法正常使用")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("--replacefiles")])]),s._v(" "),a("ul",[a("li",[s._v("使用时机：如果在安装过程中出现了「某个文件已经被安装在你的系统上」的信息，又或许出现版本不合的信息（confilcting files）时，可以使用该参数来直接覆盖文件")]),s._v(" "),a("li",[s._v("危险性：覆盖的动作无法还原，所以你必须很清楚的知道你自己在做什么")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("--replacepkgs")])]),s._v(" "),a("p",[s._v("使用时机：重新安装某个已经安装过的软件，如果你要安装一堆 RPM 软件时，可以使用 "),a("code",[s._v("rpm -ivh *.rpm")]),s._v("，但若某些软件已经安装过了，此时系统会出现某软件已经安装过的信息，导致无法继续安装。此时可以使用该选项")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("--force")])]),s._v(" "),a("p",[s._v("使用时机：该参数其实是 "),a("code",[s._v("--replacefiles")]),s._v(" 与 "),a("code",[s._v("--replacepkgs")]),s._v(" 的合体")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("--test")])]),s._v(" "),a("p",[s._v("使用时机：想要测试下该软件是否可以被安装到使用者的 Linux 环境中，可以找出是否有属性依赖问题")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("--justdb")])]),s._v(" "),a("p",[s._v("使用时机：由于 RPM 数据库破损或某些缘故产生错误时，可以使用该选项来更新软件在数据库内的相关信息")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("--nosignature")])]),s._v(" "),a("p",[s._v("使用时机：想要忽略数字签名时的检查时")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("--prefix 新路径")])]),s._v(" "),a("p",[s._v("使用时机：要将软件安装到其他非正规目录时")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("--noscripts")])]),s._v(" "),a("ul",[a("li",[s._v("使用时机：不想让该软件在安装过程中自行执行某些系统指令")]),s._v(" "),a("li",[s._v("说明：RPM 的优点除了可以将文件放置到指定位置外，还可以自动执行一些前置作业指令，例如数据库初始化。如果不想让 RPM 帮你自动执行这一类的指令，可以加上该参数")])])])]),s._v(" "),a("p",[s._v("一般来说，rpm 的安装选项与参数大约就是以上的项目。作者建议一般使用 "),a("code",[s._v("-ivh")]),s._v(" 就好了。如果安装过程中发现问题，一个一个将问题找出来，尽量不要使用暴力安装法（不要使用 "),a("code",[s._v("-force")]),s._v(" 方式）")]),s._v(" "),a("p",[s._v("范例：当没有网络时，通过原版光盘安装一个名为 pam-devel 软件时，可以如下做")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("找出光驱位置：blkid \n挂载光盘：mount /dev/sr0 /mnt\n找出文件的实际路径：find /mnt -name "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'pam-devel*'")]),s._v("\n测试此软件是否具有相依性：rpm -ivh pam-devel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". --test\n直接安装：rpm -ivh pam-devel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n卸载光盘：umount/mnt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h2",{attrs:{id:"rpm-升级与更新（upgrade-freshen）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rpm-升级与更新（upgrade-freshen）"}},[s._v("#")]),s._v(" RPM 升级与更新（upgrade/freshen）")]),s._v(" "),a("p",[s._v("使用 RPM 来升级也很简单，可以使用如下参数")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("-Uvh")])]),s._v(" "),a("p",[s._v("后面接的软件即使没有安装过，则系统直接安装；若安装过旧版的软件，则系统自动更新至新版")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("-Fvh")])]),s._v(" "),a("p",[s._v("后面接的软件并未安装到系统，则该软件不会安装；")])])]),s._v(" "),a("p",[s._v("从说明来看，"),a("code",[s._v("-Fvh")]),s._v(" 一般用在大量升级系统旧版本软件时。")]),s._v(" "),a("p",[s._v("早期没有 yum 的环境下，同时网络带宽也很糟糕的情况下，通常有的朋友在进行整个操作系统的旧版本软件修补时，喜欢这么做：")]),s._v(" "),a("ol",[a("li",[s._v("先到个发展商 errdata 网站或者是国内的 FTP 镜像下载最新的 RPM 文件")]),s._v(" "),a("li",[s._v("使用 "),a("code",[s._v("-Fvh")]),s._v(" 将你系统内曾安装过的软件进行升级")])]),s._v(" "),a("h2",{attrs:{id:"rpm-查询（query）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rpm-查询（query）"}},[s._v("#")]),s._v(" RPM 查询（query）")]),s._v(" "),a("p",[s._v("RPM 在查询的时候，其实也是使用的是 "),a("code",[s._v("/var/lib/rpm")]),s._v(" 目录下的数据库文件")]),s._v(" "),a("p",[s._v("另外，还可以查询未安装的 RPM 文件内的信息。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -qa\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 已安装软件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("licdR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 已安装的软件名称\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 已安装软件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -qf 存在于系统上面的某个文件名\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 已安装软件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -qp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("licdR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 未安装的某个文件名\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询 RPM 文件")]),s._v("\n\n选项与参数：\n查询已安装软件的信息：\n\t-q：仅查询，后面接的软件名称是否有安装\n\t-qa：列出所有的，已经安装在本机所有软件名称\n\t-qi：列出该软件的详细信息（information），包含开发商、版本与说明等\n\t-ql：列出该软件所有的文件与目录所在完整文件名（list）\n\t-qc：列出该软件的所有配置文件（找出在 "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("/etc/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" 下的文件名）\n\t-qd：列出该软件的所有说明文件（找出与 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("man")]),s._v(" 有关的文件）\n\t-qR：列出与该软件有关的相依赖软件所含的文件（Required）\n\t-qf：由后面接的文件名，找出该文件属于哪一个已安装的软件\n\t-q --scripts：列出是否含有安装后需要执行的脚本文件，可以用来 debug\n查询某个 RPM 文件内含有的信息：\n\t-qp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("icdlR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("：这里的参数与上面的一致，只是这里查询的是没有安装的软件\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("p",[s._v("在查询部分，所有参数都需要加上 "),a("code",[s._v("-q")]),s._v(" 表示查询。查询主要分为两部分：")]),s._v(" "),a("ul",[a("li",[s._v("查询已安装到系统上的软件信息，数据信息由 "),a("code",[s._v("/var/lib/rpm/")]),s._v(" 提供")]),s._v(" "),a("li",[s._v("查询 rpm 文件内容，等于是由 RPM 文件内找出一些要写入数据库内的信息，需要使用 "),a("code",[s._v("-qp(p 是 package 的含义)")])])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 范例 1：找出是否有安装 logrotate 这个软件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -q logrotate")]),s._v("\nlogrotate-3.8.6-17.el7.x86_64\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询未安装的，则提示没有安装")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -q logrotating")]),s._v("\npackage logrotating is not installed\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 范例 2：列出上题中，属于该软件所提供的所有目录与文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -ql logrotate")]),s._v("\n/etc/cron.daily/logrotate\n/etc/logrotate.conf\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以看到有很多的文件和目录，可以用来追踪软件的数据")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 范例 3：列出 logrotate 软件的相关说明")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -qi logrotate")]),s._v("\nName        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("logrotate")]),s._v("\t\t\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 软件名称")]),s._v("\nVersion     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.8")]),s._v(".6\t\t\t\t\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 软件版本")]),s._v("\nRelease     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(".el7\t\t\t\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 释出的版本")]),s._v("\nArchitecture: x86_64\t\t\t\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编译时所针对的硬件等级")]),s._v("\nInstall Date: Fri Oct  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":22:43 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 该软件安装到本系统的时间")]),s._v("\nGroup       "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" System Environment/Base\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 软件是放在哪一个软件群组中")]),s._v("\nSize        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("107156")]),s._v("\t\t\t\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 软件的大小")]),s._v("\nLicense     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" GPL+\t\t\t\t\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 释出的授权方式")]),s._v("\nSignature   "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" RSA/SHA256, Mon Nov "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(":39:25 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(", Key ID 24c6a8a7f4a80eb5\nSource RPM  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" logrotate-3.8.6-17.el7.src.rpm\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# SRPM 的文件名")]),s._v("\nBuild Date  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" Wed Oct "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v(" 03:13:00 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v("\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 软件编译打包的时间")]),s._v("\nBuild Host  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" x86-01.bsys.centos.org\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在哪一部主机上编译的")]),s._v("\nRelocations "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("not relocatable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPackager    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" CentOS BuildSystem "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("http://bugs.centos.org"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nVendor      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" CentOS\nURL         "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" https://github.com/logrotate/logrotate\nSummary     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" Rotates, compresses, removes and mails system log files\nDescription "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v("\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 详细描述")]),s._v("\nThe "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("logrotate")]),s._v(" utility is designed to simplify the administration of\nlog files on a system "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" generates a lot of log files.  Logrotate\nallows "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the automatic rotation compression, removal and mailing of\nlog files.  Logrotate can be "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" to handle a log "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" daily, weekly,\nmonthly or when the log "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" gets to a certain size.  Normally,\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("logrotate")]),s._v(" runs as a daily "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cron")]),s._v(" job.\n\nInstall the "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("logrotate")]),s._v(" package "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" you need a utility to deal with the\nlog files on your system.\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出了很多的信息")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 范例 4：分别仅找出 logrotate 的配置文件与说明文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -qc logrotate")]),s._v("\n/etc/cron.daily/logrotate\n/etc/logrotate.conf\n/etc/rwtab.d/logrotate\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -qd logrotate")]),s._v("\n/usr/share/doc/logrotate-3.8.6/CHANGES\n/usr/share/doc/logrotate-3.8.6/COPYING\n/usr/share/man/man5/logrotate.conf.5.gz\n/usr/share/man/man8/logrotate.8.gz\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 范例 5：若要成功安装 logrotate，还需要什么文件的帮忙")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -qR logrotate")]),s._v("\n/bin/sh\n/bin/sh\nconfig"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("logrotate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.8")]),s._v(".6-17.el7\ncoreutils "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.92")]),s._v("\nlibacl.so.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("64bit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nlibacl.so.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ACL_1.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("64bit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nlibc.so.6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("64bit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nlibc.so.6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("GLIBC_2.14"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("64bit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nlibc.so.6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("GLIBC_2.2.5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("64bit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nlibc.so.6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("GLIBC_2.3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("64bit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nlibc.so.6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("GLIBC_2.3.4"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("64bit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nlibc.so.6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("GLIBC_2.4"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("64bit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nlibc.so.6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("GLIBC_2.7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("64bit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nlibc.so.6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("GLIBC_2.8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("64bit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nlibpopt.so.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("64bit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nlibpopt.so.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("LIBPOPT_0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("64bit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nlibselinux.so.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("64bit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\npopt\nrpmlib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CompressedFileNames"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),s._v(".4-1\nrpmlib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("FileDigests"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.6")]),s._v(".0-1\nrpmlib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("PayloadFilesHavePrefix"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.0")]),s._v("-1\nrtld"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("GNU_HASH"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nrpmlib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("PayloadIsXz"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.2")]),s._v("-1\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出了该软件的依赖文件")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 范例 6：在范例 5 基础上，找出 /bin/sh 是哪个软件提供的？")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -qf /bin/sh")]),s._v("\nbash-4.2.46-33.el7.x86_64\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 参数后，接的是文件，而不是软件名称")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 该功能查询系统的某个文件属于哪一个软件的")]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 范例 7：假设我下载一个 RPM 文件，想要知道该文件的需求文件")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -qpR filename.i386.rpm\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br")])]),a("h3",{attrs:{id:"练习题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#练习题"}},[s._v("#")]),s._v(" 练习题")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("想要知道系统中，以 C 开头的软件有几个")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -qa | grep ^c | wc -l")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("www 服务器为 Apache，我知道它使用的 RPM 软件文件名为 httpd，要知道这个软件的所有配置文件放置何处")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -qc httpd")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("承上题，如果查出来的配置文件已经被修改过，但是忘记修改了哪些地方，所以想要直接重新安装一次软件")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("假设该软件在网络上的地址为：http://xxx.com/path/httpd-x.x.xx.i386.rpm\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -ivh http://xxx.com/path/httpd-x.x.xx.i386.rpm --replacepkgs\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("如果误删了某个重要文件，如 "),a("code",[s._v("/etc/crontab")]),s._v(" ，但不知道它属于哪一个软件，怎么办？")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -qf /etc/crontab ")]),s._v("\ncrontabs-1.11-6.20121102git.el7.noarch\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"rpm-验证与数字签名（verify、signature）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rpm-验证与数字签名（verify、signature）"}},[s._v("#")]),s._v(" RPM 验证与数字签名（Verify、signature）")]),s._v(" "),a("p",[s._v("验证功能主要作用是使用 "),a("code",[s._v("/var/lib/rpm")]),s._v(" 下的数据库内容来比对目前 LInux 系统的环境下的偶有软件文件，是否有被修改过（笔者猜测可能是和原始安装文件中的文件对比？）")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -Va\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -V 已安装的软件名称\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -Vp 某个 RPM 文件的文件名\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -Vf 在系统上的某个文件\n\n选项与参数：\n\t-V：后面加的是软件名称，若该软件所含的文件被修改过，才会列出来\n\t-Va：列出目前系统上所有可能被修改过的文件\n\t-Vp：后面加的是文件名，列出该软件内可能被修改过的文件\n\t-Vf：列出某个文件是否被修改过\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 范例 1：列出你的 Linux 内的 logrotate 软件是否被修改过")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -V logrotate")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 没有任何信息，表示没有被修改过")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 范例 2：查询下 /etc/crontab 是否被修改过")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -Vf /etc/crontab ")]),s._v("\nS.5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("T.  c /etc/crontab\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 因为被更改过，所以列出更改过的信息类型")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("你是否有一个疑问？哪些文件是可以被用来查询是否有修改过的？还记得 rpm 的"),a("code",[s._v("-ql：列出该软件所有的文件与目录所在完整文件名（list）")]),s._v("？下面就来实践下")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -ql logrotate")]),s._v("\n/etc/cron.daily/logrotate\n/etc/logrotate.conf\n/etc/logrotate.d\n/etc/rwtab.d/logrotate\n/usr/sbin/logrotate\n/usr/share/doc/logrotate-3.8.6\n/usr/share/doc/logrotate-3.8.6/CHANGES\n/usr/share/doc/logrotate-3.8.6/COPYING\n/usr/share/man/man5/logrotate.conf.5.gz\n/usr/share/man/man8/logrotate.8.gz\n/var/lib/logrotate\n/var/lib/logrotate/logrotate.status\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 该软件一共有 12 个文件，修改 /etc/logrotate.conf 内的 rotate 变成 6")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 再看看该软件有哪些文件被修改过了")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -V logrotate")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("T.  c /etc/logrotate.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("p",[s._v("文件名前面有一个 c 表示是 configuration （配置文件），前面一堆的含义如下：")]),s._v(" "),a("ul",[a("li",[s._v("S：file Size differs，文件的容量大小已经改变")]),s._v(" "),a("li",[s._v("M：Mode differs，文件的类型或文件的属性（rwx）已经改变")]),s._v(" "),a("li",[s._v("5：MD5 sum differs，MD5 指纹码的内容已经改变")]),s._v(" "),a("li",[s._v("D：Device major/minor number mis-match，设备的主/次代码已经改变")]),s._v(" "),a("li",[s._v("L：readLink(2) path mis-match，Link 路径已经改变")]),s._v(" "),a("li",[s._v("U：User ownership differs，文件的所属人已经改变")]),s._v(" "),a("li",[s._v("G：Group ownership differs，文件的所属群组已被改变")]),s._v(" "),a("li",[s._v("T：mTime differs，文件的建立时间已被改变")]),s._v(" "),a("li",[s._v("P：caPabilities differ，功能已经改变")])]),s._v(" "),a("p",[s._v("所以当一个配置文件的所有信息都被修改过，则会显示 "),a("code",[s._v("SM5DLUGTP c filename")])]),s._v(" "),a("p",[s._v("文件名前面的 c 表示是文件类型，有以下几类：")]),s._v(" "),a("ul",[a("li",[s._v("c：配置文件 config file")]),s._v(" "),a("li",[s._v("d：文件数据文件 documentation")]),s._v(" "),a("li",[s._v("g：鬼文件 ghost file，通常是该文件不被某个软件包含，较少发生")]),s._v(" "),a("li",[s._v("l：许可证文件 license file")]),s._v(" "),a("li",[s._v("r：自述文件 read me")])]),s._v(" "),a("p",[s._v("通过该功能，如果这些修改是预期中的，就是正常的，比如你的 binary progran 都被修改过了，那么就要小心了（作者通过 rpm -Va 找出来好多 binary program 被修改过，被黑了，当成了跳板机）")]),s._v(" "),a("h3",{attrs:{id:"数字签名（digital-signature）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数字签名（digital-signature）"}},[s._v("#")]),s._v(" 数字签名（digital signature）")]),s._v(" "),a("p",[s._v("首先，安装软件时，去对比官方释出的 MD5 指纹，能对上则表示是官方释出的，但是 MD5 也可能被串改？用数字签名来校验软件的来源")]),s._v(" "),a("p",[s._v("厂商可以数字签名系统产生一个专属于该软件的签章，并将该签章的公钥（public key）释出，当安装一个 RPM 软件时：")]),s._v(" "),a("ol",[a("li",[s._v("首先比如要先安装原厂释出的公钥文件")]),s._v(" "),a("li",[s._v("实际安装原厂的 RPM 软件时，rpm 指令会去读取 RPM 文件的签章信息，与本机系统内的签章信息比对")]),s._v(" "),a("li",[s._v("若签章相同则安装，若找不到相关的签章信息时，则给予警告并且停止安装")])]),s._v(" "),a("p",[s._v("CentOS 使用的数字签名系统为 GNU 计划的 GnuPG（GNU Privacy Guard）。有兴趣可以去详细了解下 GPG 的加密机制，这里简单的说明数字签名在 RPM 文件上的应用。")]),s._v(" "),a("p",[s._v("那么首选比如安装原厂释出的 GPG 数字签名的公钥文件，CentOS 的数字签名位于")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 ")]),s._v("\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1690")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("月   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7")]),s._v("\n-----BEGIN PGP PUBLIC KEY BLOCK-----\nVersion: GnuPG v1.4.5 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("GNU/Linux"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmQINBFOn/0sBEADLDyZ+DQHkcTHDQSE0a0B2iYAEXwpPvs67cJ4tmhe/iMOyVMh9\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("OGYX\n-----END PGP PUBLIC KEY BLOCK-----\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("那么该文件可以通过如下的方式来安装")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("由于不同版本 GPG 密钥文件放置的位置可能不同，不过大多是以 GPG-KEY 来命名的，可以简单时候 locate 或 find 来寻找")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# locate GPG-KEY")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# find /etc -name '*GPG-KEY*'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("安装完成后，这个密钥的内容基本上以 pubkey 的软件名称来呈现")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -qa | grep pubkey")]),s._v("\ngpg-pubkey-f4a80eb5-53a7ff4b\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -qi gpg-pubkey-f4a80eb5-53a7ff4b")]),s._v("\nName        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" gpg-pubkey\nVersion     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" f4a80eb5\nRelease     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 53a7ff4b\nArchitecture: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nInstall Date: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("年04月05日 星期日 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("时21分30秒\nGroup       "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" Public Keys\nSize        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nLicense     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" pubkey\nSignature   "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nSource RPM  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nBuild Date  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2014")]),s._v("年06月23日 星期一 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v("时19分55秒\nBuild Host  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" localhost\nRelocations "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("not relocatable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPackager    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" CentOS-7 Key "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CentOS "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" Official Signing Key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("security@centos.org"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nSummary     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" gpg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CentOS-7 Key "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CentOS "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" Official Signing Key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("security@centos.org"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nDescription "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v("\n-----BEGIN PGP PUBLIC KEY BLOCK-----\nVersion: rpm-4.11.3 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("NSS-3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmQINBFOn/0sBEADLDyZ+DQHkcTHDQSE0a0B2iYAEXwpPvs67cJ4tmhe/iMOyVMh9\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("OGYX\n-----END PGP PUBLIC KEY BLOCK-----\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br")])]),a("p",[s._v("重点是最后面出现的一串数据，如果你忘记加上数字签名，很多原版软件就不能让你安装，除非使用 rpm 时选择忽略数字签名的选项")]),s._v(" "),a("p",[s._v("笔者疑问：这个数值签名是系统自动安装的，是随机的吗？那么多版本的系统和软件，难道都公用同一个？这个笔者有点想不通")]),s._v(" "),a("h2",{attrs:{id:"rpm-卸载与重建数据库（erase-rebuilddb）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rpm-卸载与重建数据库（erase-rebuilddb）"}},[s._v("#")]),s._v(" RPM 卸载与重建数据库（erase/rebuilddb）")]),s._v(" "),a("p",[s._v("卸载软件，要注意的是，由最上层往下卸载，啥意思？由于有函数库软件依赖等原因，要正常卸载的话，只能卸载掉一个没有被依赖的软件或则函数库，有依赖的就会导致无法卸载。下面一个案例说明")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1. 好处与 pam 有关的软件名称，并尝试移除 pam 软件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -qa | grep pam")]),s._v("\nfprintd-pam-0.8.1-2.el7.x86_64\ngnome-keyring-pam-3.28.2-1.el7.x86_64\npam-1.1.8-22.el7.x86_64\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -e pam ")]),s._v("\nerror: Failed dependencies: "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检测到有很多软件依赖了它，不能删除")]),s._v("\n\tlibpam.so.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("64bit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" is needed by "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("installed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" libpwquality-1.2.3-5.el7.x86_64\n\tlibpam.so.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("64bit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" is needed by "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("installed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" libuser-0.60-9.el7.x86_64\n\tlibpam.so.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("64bit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" is needed by "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("installed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" passwd-0.79-5.el7.x86_64\n\tlibpam.so.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("64bit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" is needed by "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("installed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" util-linux-2.23.2-61.el7.x86_64\n\t\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2. 若移除 rp-pppoe 软件就可以")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rp-pppoe 软件是本章练习安装的，所以没有任何软件依赖它")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -e rp-pppoe")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[s._v("由于 RPM 文件常常会安装、移除、升级等，某些动作可能会导致 RPM 数据库 "),a("code",[s._v("/var/lib/rpm/")]),s._v(" 内的文件破损。此时你可以重建它")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" --rebuilddb   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重建数据库")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);